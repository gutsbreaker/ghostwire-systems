================================================================================
FILE: next-env.d.ts
================================================================================

/// <reference types="next" />
/// <reference types="next/image-types/global" />
import "./.next/dev/types/routes.d.ts";

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.


================================================================================
FILE: next.config.ts
================================================================================

import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  // Enable Turbopack and configure it for GLB files
  turbopack: {
    rules: {
      '*.glb': {
        loaders: ['file-loader'],
        as: '*.glb',
      },
      '*.gltf': {
        loaders: ['file-loader'],
        as: '*.gltf',
      },
    },
  },
};

export default nextConfig;

================================================================================
FILE: package.json
================================================================================

{
  "name": "ghostwire-systems",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "@react-three/drei": "^10.7.7",
    "@react-three/fiber": "^9.5.0",
    "@react-three/postprocessing": "^3.0.4",
    "clsx": "^2.1.1",
    "framer-motion": "^12.34.3",
    "gsap": "^3.14.2",
    "lenis": "^1.3.17",
    "lucide-react": "^0.575.0",
    "next": "16.1.6",
    "postprocessing": "^6.38.3",
    "react": "19.2.3",
    "react-dom": "19.2.3",
    "tailwind-merge": "^3.5.0",
    "three": "^0.183.1",
    "three-stdlib": "^2.36.1",
    "zustand": "^5.0.11"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "eslint": "^9",
    "eslint-config-next": "16.1.6",
    "tailwindcss": "^4",
    "typescript": "^5"
  }
}


================================================================================
FILE: tsconfig.json
================================================================================

{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": ["node_modules"]
}


================================================================================
FILE: app\globals.css
================================================================================

@import "tailwindcss";

/* Cyberpunk Theme Variables */
@theme {
  /* Custom Colors */
  --color-neon-green: #39FF14;
  --color-cyber-cyan: #00F0FF;
  --color-electric-purple: #BF00FF;
  --color-alert-red: #FF003C;
  --color-deep-black: #0A0A0A;
  --color-dark-grey: #1A1A1A;
  --color-ghost-white: #F0F0F0;
  --animate-marquee: marquee 20s linear infinite;

  /* Font Families */
  --font-family-orbitron: 'Orbitron', sans-serif;
  --font-family-rajdhani: 'Rajdhani', sans-serif;
  --font-family-inter: 'Inter', sans-serif;
  --font-family-mono: 'JetBrains Mono', monospace;

  /* Custom Shadows */
  --shadow-neon-green: 0 0 10px #39FF14, 0 0 20px #39FF14, 0 0 30px #39FF14;
  --shadow-neon-cyan: 0 0 10px #00F0FF, 0 0 20px #00F0FF, 0 0 30px #00F0FF;
  --shadow-neon-purple: 0 0 10px #BF00FF, 0 0 20px #BF00FF, 0 0 30px #BF00FF;
  --shadow-neon-red: 0 0 10px #FF003C, 0 0 20px #FF003C, 0 0 30px #FF003C;

  /* Animations */
  --animate-pulse-glow: pulse-glow 2s ease-in-out infinite;
  --animate-float: float 3s ease-in-out infinite;
}

/* Keyframe Animations */
@keyframes pulse-glow {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}
@keyframes marquee {
  0% { transform: translateX(0%); }
  100% { transform: translateX(-50%); }
}
/* Base Styles */
html, body {
  background-color: #0A0A0A;
  color: #F0F0F0;
  font-feature-settings: "rlig" 1, "calt" 1;
}

/* Custom Utility Classes */
.glass {
  background: rgba(26, 26, 26, 0.7);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.border-neon-green {
  border-color: #39FF14;
  box-shadow: 0 0 5px #39FF14;
}

.border-neon-cyan {
  border-color: #00F0FF;
  box-shadow: 0 0 5px #00F0FF;
}

.border-neon-purple {
  border-color: #BF00FF;
  box-shadow: 0 0 5px #BF00FF;
}



.text-glow-green {
  color: #39FF14;
  text-shadow: 0 0 10px #39FF14, 0 0 20px #39FF14;
}

.text-glow-cyan {
  color: #00F0FF;
  text-shadow: 0 0 10px #00F0FF, 0 0 20px #00F0FF;
}

.text-glow-purple {
  color: #BF00FF;
  text-shadow: 0 0 10px #BF00FF, 0 0 20px #BF00FF;
}

.shadow-neon-green {
  box-shadow: 0 0 10px #39FF14, 0 0 20px #39FF14, 0 0 30px #39FF14;
}

.shadow-neon-cyan {
  box-shadow: 0 0 10px #00F0FF, 0 0 20px #00F0FF, 0 0 30px #00F0FF;
}

.shadow-neon-purple {
  box-shadow: 0 0 10px #BF00FF, 0 0 20px #BF00FF, 0 0 30px #BF00FF;
}

.bg-deep-black {
  background-color: #0A0A0A;
}

.bg-dark-grey {
  background-color: #1A1A1A;
}

.text-ghost-white {
  color: #F0F0F0;
}

.text-cyber-cyan {
  color: #00F0FF;
}

.font-orbitron {
  font-family: var(--font-orbitron), 'Orbitron', sans-serif;
}

.font-rajdhani {
  font-family: var(--font-rajdhani), 'Rajdhani', sans-serif;
}

================================================================================
FILE: app\layout.tsx
================================================================================

import type { Metadata } from "next";
import { Inter, Orbitron, Rajdhani, JetBrains_Mono } from "next/font/google";
import "./globals.css";
import { Navbar } from "@/components/layout/Navbar";
import { Footer } from "@/components/layout/Footer";
import { RobotManager } from "@/components/3d/RobotManager";
import { ChatBox } from "@/components/layout/ChatBox";

const inter = Inter({ 
  subsets: ["latin"],
  variable: '--font-inter',
  display: 'swap',
});

const orbitron = Orbitron({ 
  subsets: ["latin"],
  variable: '--font-orbitron',
  display: 'swap',
});

const rajdhani = Rajdhani({ 
  subsets: ["latin"],
  weight: ['300', '400', '500', '600', '700'],
  variable: '--font-rajdhani',
  display: 'swap',
});

const jetbrainsMono = JetBrains_Mono({ 
  subsets: ["latin"],
  variable: '--font-jetbrains-mono',
  display: 'swap',
});

export const metadata: Metadata = {
  title: "Ghostwire Systems | Advanced POS & ERP",
  description: "Next-generation Point of Sale and ERP system with cyberpunk aesthetics",
};

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en" className="dark">
      <body className={`${inter.variable} ${orbitron.variable} ${rajdhani.variable} ${jetbrainsMono.variable} font-inter antialiased bg-deep-black text-ghost-white`}>
        <Navbar />
        {children}
        <Footer />
        <RobotManager />
        <ChatBox />
      </body>
    </html>
  );
}

================================================================================
FILE: app\page.tsx
================================================================================

'use client';

import React, { useEffect, useState } from 'react';
import { motion, useMotionValue, useTransform, useSpring, AnimatePresence } from 'framer-motion';
import Lenis from 'lenis';
import { Button } from '@/components/ui/Button';
import { 
  Terminal, Zap, ShieldCheck, WifiOff, Cpu, Layers, Activity, 
  Globe, Monitor, Smartphone, Printer, ScanLine, ServerCrash,
  Lock, Fingerprint, Webhook, Database, Blocks, Link2
} from 'lucide-react';
import { useRouter } from 'next/navigation';
import { useRobotStore } from '@/lib/store';

// --- 3D TILT CARD COMPONENT FOR TESTIMONIALS ---
function TiltTestimonialCard({ review }: { review: any }) {
  const x = useMotionValue(0);
  const y = useMotionValue(0);
  const mouseXSpring = useSpring(x);
  const mouseYSpring = useSpring(y);
  const rotateX = useTransform(mouseYSpring, [-0.5, 0.5], ["15deg", "-15deg"]);
  const rotateY = useTransform(mouseXSpring, [-0.5, 0.5], ["-15deg", "15deg"]);

  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {
    const rect = e.currentTarget.getBoundingClientRect();
    const width = rect.width;
    const height = rect.height;
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;
    const xPct = mouseX / width - 0.5;
    const yPct = mouseY / height - 0.5;
    x.set(xPct);
    y.set(yPct);
  };

  const handleMouseLeave = () => { x.set(0); y.set(0); };

  return (
    <motion.div
      style={{ rotateX, rotateY, transformStyle: "preserve-3d" }}
      onMouseMove={handleMouseMove}
      onMouseLeave={handleMouseLeave}
      className="relative w-full glass p-8 rounded-2xl border border-white/10 shadow-2xl cursor-pointer group"
    >
      <div className="absolute inset-0 bg-gradient-to-br from-neon-green/0 to-cyber-cyan/0 group-hover:from-neon-green/10 group-hover:to-cyber-cyan/10 rounded-2xl transition-colors duration-500 pointer-events-none"></div>
      <div style={{ transform: "translateZ(50px)" }} className="relative z-10">
        <div className="flex items-center gap-4 mb-6">
          <div className={`w-14 h-14 rounded-full border-2 border-${review.color} bg-deep-black overflow-hidden flex items-center justify-center shadow-[0_0_15px_${review.hex}40]`}>
            <img src={review.img} alt={review.name} className="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500" />
          </div>
          <div>
            <h4 className={`font-orbitron text-lg text-${review.color}`}>{review.name}</h4>
            <p className="font-mono text-xs text-ghost-white/50">{review.role}</p>
          </div>
        </div>
        <p className="font-rajdhani text-ghost-white/80 leading-relaxed text-lg">"{review.quote}"</p>
      </div>
    </motion.div>
  );
}

export default function Home() {
  const router = useRouter();
  const { flyTo } = useRobotStore();
  
  // --- SPLASH SCREEN STATE ---
  const [bootSequence, setBootSequence] = useState(true);
  const [bootLogs, setBootLogs] = useState<string[]>([]);

  useEffect(() => {
    // Lock scrolling while booting
    document.body.style.overflow = bootSequence ? 'hidden' : 'unset';
  }, [bootSequence]);

  useEffect(() => {
    const logs = [
      "INITIALIZING GHOSTWIRE KERNEL v2.0.4...",
      "LOADING OFFLINE RESILIENCE PROTOCOLS...",
      "ESTABLISHING ENCRYPTED COMM-LINK...",
      "BYPASSING LEGACY MAINFRAMES...",
      "SYSTEM ONLINE. WELCOME OPERATOR."
    ];
    
    const interval = setInterval(() => {
      setBootLogs(prev => {
        if (prev.length < logs.length) {
          return [...prev, logs[prev.length]];
        }
        clearInterval(interval);
        return prev;
      });
    }, 350);

    return () => clearInterval(interval);
  }, []);

  useEffect(() => {
    if (bootLogs.length === 5) {
      const t = setTimeout(() => setBootSequence(false), 1200);
      return () => clearTimeout(t);
    }
  }, [bootLogs]);

  useEffect(() => {
    if (bootSequence) return; // Wait until splash is done to start Lenis
    
    const lenis = new Lenis({
      duration: 1.2,
      easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
      smoothWheel: true,
    });
    function raf(time: number) { lenis.raf(time); requestAnimationFrame(raf); }
    requestAnimationFrame(raf);
    return () => lenis.destroy();
  }, [bootSequence]);

  const handleRobotNavigation = (path: string, x: number, y: number) => {
    flyTo(path, { x, y }, () => router.push(path));
  };

  const reviews = [
    { name: 'Sarah J.', role: 'Owner, Cyber Cafe Neo', quote: 'Before Ghostwire, our servers crashed every Friday rush. Now? I literally sit back and watch the telemetry flow. It is flawless.', img: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?auto=format&fit=crop&w=200&q=80', color: 'neon-green', hex: '#39FF14' },
    { name: 'Marcus T.', role: 'Director of Retail, Vanguard', quote: 'The offline resilience isn’t a gimmick. Our ISP went down for 4 hours; Ghostwire didn’t drop a single transaction. Military-grade indeed.', img: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=200&q=80', color: 'cyber-cyan', hex: '#00F0FF' },
    { name: 'Elena R.', role: 'Franchise Operator', quote: 'The AI inventory restocking feels like magic. It knew we were running out of core supplies before my managers did. Saved our weekend.', img: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=200&q=80', color: 'electric-purple', hex: '#BF00FF' },
  ];

  return (
    <>
      {/* 0. CYBERPUNK SPLASH SCREEN */}
      <AnimatePresence>
        {bootSequence && (
          <motion.div
            initial={{ opacity: 1 }}
            exit={{ opacity: 0, scale: 1.05, filter: "blur(10px)" }}
            transition={{ duration: 0.8, ease: "easeInOut" }}
            className="fixed inset-0 z-[999999] bg-deep-black flex flex-col items-center justify-center p-6 font-mono"
          >
            <div className="absolute inset-0 cyber-grid opacity-20 pointer-events-none"></div>
            <div className="w-full max-w-2xl relative z-10">
              <div className="flex items-center gap-4 mb-10 border-b border-neon-green/30 pb-6">
                <Zap className="w-12 h-12 text-neon-green animate-pulse shadow-neon-green rounded-full" />
                <div>
                  <h1 className="text-4xl md:text-5xl font-orbitron text-ghost-white tracking-widest text-glow-green">GHOSTWIRE.SYS</h1>
                  <p className="text-neon-green/50 text-xs mt-1">TERMINAL UPLINK // AWAITING SECURE HANDSHAKE</p>
                </div>
              </div>
              <div className="space-y-3 min-h-[200px]">
                {bootLogs.map((log, i) => (
                  <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} className="text-neon-green text-sm md:text-base flex gap-3">
                    <span className="text-ghost-white/40">{`[${new Date().toISOString().split('T')[1].slice(0, 8)}]`}</span>
                    <span>{`> ${log}`}</span>
                  </motion.div>
                ))}
                <motion.div animate={{ opacity: [1, 0] }} transition={{ repeat: Infinity, duration: 0.8 }} className="w-3 h-5 bg-neon-green inline-block mt-2 ml-24" />
              </div>
            </div>
          </motion.div>
        )}
      </AnimatePresence>

      <main className="relative min-h-screen bg-deep-black cyber-grid overflow-hidden pt-20">
        
        {/* 1. TEXT HERO SECTION */}
        <section className="relative min-h-[80vh] w-full flex flex-col items-center justify-center px-4 z-10">
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 1, delay: bootSequence ? 0 : 0.5 }} className="text-center max-w-5xl mx-auto">
            <div className="inline-flex items-center space-x-2 glass px-4 py-2 rounded-full border border-cyber-cyan/30 mb-8 shadow-neon-cyan">
              <span className="w-2 h-2 rounded-full bg-cyber-cyan animate-pulse"></span>
              <span className="text-cyber-cyan font-mono text-sm uppercase tracking-wider">System Online v2.0</span>
            </div>
            <h1 className="text-5xl md:text-7xl lg:text-8xl font-orbitron font-bold text-ghost-white mb-6 tracking-tight drop-shadow-2xl">
              THE FUTURE OF <br /> <span className="text-glow-cyan">ENTERPRISE</span> POS
            </h1>
            <p className="mt-6 text-xl md:text-2xl font-rajdhani text-ghost-white max-w-3xl mx-auto mb-10 leading-relaxed drop-shadow-lg">
              Ghostwire Systems merges hyper-fast transaction processing with intelligent ERP capabilities.
            </p>
            <div className="flex flex-col sm:flex-row gap-6 justify-center items-center">
              <Button variant="neon-cyan" size="lg" className="text-lg group" onClick={() => handleRobotNavigation('/demo', 80, -20)}>
                <Terminal className="w-5 h-5 inline-block mr-2 group-hover:animate-pulse" /> Initialize Demo
              </Button>
              <Button variant="glass" size="lg" className="text-lg" onClick={() => handleRobotNavigation('/products', 0, 50)}>
                View Capabilities
              </Button>
            </div>
          </motion.div>
        </section>

        {/* 2. CORE POS ARCHITECTURE (Bento Grid) */}
        <section className="py-24 relative z-10 bg-deep-black border-y border-white/10">
          <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-cyber-cyan/5 blur-[150px] pointer-events-none rounded-full"></div>
          
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} className="mb-16">
              <h2 className="text-3xl md:text-5xl font-orbitron text-ghost-white mb-4">GHOSTWIRE <span className="text-glow-cyan">MATRIX</span></h2>
              <p className="text-xl font-rajdhani text-ghost-white/60 max-w-2xl">Built from the ground up to solve the real-world operational bottlenecks of legacy point of sale systems.</p>
            </motion.div>

            {/* BENTO BOX GRID */}
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              
              {/* Box 1: Offline Resilience */}
              <motion.div initial={{ opacity: 0, y: 30 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: 0.1 }} 
                className="md:col-span-2 glass p-8 rounded-2xl border border-neon-green/30 hover:border-neon-green hover:shadow-neon-green transition-all duration-300 group overflow-hidden relative"
              >
                <div className="absolute -right-10 -bottom-10 opacity-10 group-hover:opacity-20 transition-opacity duration-500">
                  <WifiOff className="w-64 h-64 text-neon-green" />
                </div>
                <div className="w-14 h-14 bg-neon-green/10 rounded-xl flex items-center justify-center mb-6 border border-neon-green/50">
                  <WifiOff className="w-7 h-7 text-neon-green" />
                </div>
                <h3 className="text-3xl font-orbitron text-ghost-white mb-3">Absolute Offline Resilience</h3>
                <p className="text-lg font-rajdhani text-ghost-white/70 max-w-md">
                  Internet outages shouldn't stop your business. If the cloud drops, Ghostwire terminals instantly create a local mesh network, syncing orders, KDS tickets, and payments locally until the grid returns.
                </p>
              </motion.div>

              {/* Box 2: Speed */}
              <motion.div initial={{ opacity: 0, y: 30 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: 0.2 }}
                className="glass p-8 rounded-2xl border border-cyber-cyan/30 hover:border-cyber-cyan hover:shadow-neon-cyan transition-all duration-300 group"
              >
                <div className="w-14 h-14 bg-cyber-cyan/10 rounded-xl flex items-center justify-center mb-6 border border-cyber-cyan/50 group-hover:animate-pulse">
                  <Activity className="w-7 h-7 text-cyber-cyan" />
                </div>
                <h3 className="text-2xl font-orbitron text-ghost-white mb-3">Sub-12ms Latency</h3>
                <p className="text-lg font-rajdhani text-ghost-white/70">
                  Built on a custom Rust backend, eliminating the bloat of web-wrapper POS systems. Barcode scans register instantly.
                </p>
              </motion.div>

              {/* Box 3: Hardware Agnostic */}
              <motion.div initial={{ opacity: 0, y: 30 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: 0.3 }}
                className="glass p-8 rounded-2xl border border-electric-purple/30 hover:border-electric-purple hover:shadow-neon-purple transition-all duration-300 group"
              >
                <div className="w-14 h-14 bg-electric-purple/10 rounded-xl flex items-center justify-center mb-6 border border-electric-purple/50">
                  <Cpu className="w-7 h-7 text-electric-purple" />
                </div>
                <h3 className="text-2xl font-orbitron text-ghost-white mb-3">Hardware Agnostic</h3>
                <p className="text-lg font-rajdhani text-ghost-white/70">
                  Run on iOS, Android, or Windows. Bring your own devices or upgrade to our military-grade encrypted terminals.
                </p>
              </motion.div>

              {/* Box 4: ERP Integration */}
              <motion.div initial={{ opacity: 0, y: 30 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: 0.4 }}
                className="md:col-span-2 glass p-8 rounded-2xl border border-white/10 hover:border-white/30 transition-all duration-300 group relative overflow-hidden"
              >
                 <div className="absolute right-0 top-0 h-full w-1/2 bg-gradient-to-l from-white/5 to-transparent pointer-events-none"></div>
                 <div className="w-14 h-14 bg-white/5 rounded-xl flex items-center justify-center mb-6 border border-white/20">
                  <Layers className="w-7 h-7 text-ghost-white" />
                </div>
                <h3 className="text-3xl font-orbitron text-ghost-white mb-3">Native ERP Ecosystem</h3>
                <p className="text-lg font-rajdhani text-ghost-white/70 max-w-lg">
                  Stop duct-taping third-party apps together. Inventory management, employee scheduling, franchise royalties, and vendor purchasing are deeply integrated natively into the core POS matrix.
                </p>
              </motion.div>

            </div>
          </div>
        </section>

        {/* 3. NEW SECTION: GLOBAL TELEMETRY (Data & Scale) */}
        <section className="py-20 relative z-10 bg-[#070707] border-b border-white/5 overflow-hidden">
          <div className="absolute inset-0 cyber-grid opacity-30 pointer-events-none"></div>
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div className="grid grid-cols-2 md:grid-cols-4 gap-8 md:gap-12 text-center divide-x divide-white/10">
              
              <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} className="flex flex-col items-center justify-center">
                <Globe className="w-8 h-8 text-cyber-cyan mb-4 opacity-50" />
                <h4 className="text-4xl md:text-5xl font-orbitron text-glow-cyan text-cyber-cyan mb-2">12,450</h4>
                <p className="font-mono text-xs md:text-sm text-ghost-white/50 uppercase tracking-widest">Active Nodes</p>
              </motion.div>

              <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: 0.1 }} className="flex flex-col items-center justify-center">
                <Activity className="w-8 h-8 text-neon-green mb-4 opacity-50" />
                <h4 className="text-4xl md:text-5xl font-orbitron text-glow-green text-neon-green mb-2">$4.2B+</h4>
                <p className="font-mono text-xs md:text-sm text-ghost-white/50 uppercase tracking-widest">Annual Vol.</p>
              </motion.div>

              <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: 0.2 }} className="flex flex-col items-center justify-center">
                <ShieldCheck className="w-8 h-8 text-electric-purple mb-4 opacity-50" />
                <h4 className="text-4xl md:text-5xl font-orbitron text-glow-purple text-electric-purple mb-2">99.999%</h4>
                <p className="font-mono text-xs md:text-sm text-ghost-white/50 uppercase tracking-widest">Grid Uptime</p>
              </motion.div>

              <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: 0.3 }} className="flex flex-col items-center justify-center">
                <ServerCrash className="w-8 h-8 text-ghost-white mb-4 opacity-20" />
                <h4 className="text-4xl md:text-5xl font-orbitron text-ghost-white mb-2">ZERO</h4>
                <p className="font-mono text-xs md:text-sm text-ghost-white/50 uppercase tracking-widest">Data Breaches</p>
              </motion.div>

            </div>
          </div>
        </section>

        {/* 4. FORTRESS PROTOCOL (Security Add-on) */}
        <section className="py-24 relative z-10 bg-[#050505] overflow-hidden border-b border-white/5">
          <div className="absolute left-0 top-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-alert-red/5 blur-[120px] pointer-events-none rounded-full"></div>
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div className="flex flex-col lg:flex-row items-center gap-16">
              <motion.div initial={{ opacity: 0, x: -50 }} whileInView={{ opacity: 1, x: 0 }} viewport={{ once: true }} className="lg:w-1/2">
                <h2 className="text-3xl md:text-5xl font-orbitron text-ghost-white mb-6">FORTRESS <span className="text-glow-red text-alert-red">PROTOCOL</span></h2>
                <p className="text-xl font-rajdhani text-ghost-white/60 mb-8 leading-relaxed">
                  Enterprise-grade security embedded into the silicon level. We treat every single transaction as a high-value data packet. 
                </p>
                <div className="space-y-6">
                  <div className="flex items-start gap-4">
                    <div className="p-3 glass rounded-lg border border-alert-red/30 text-alert-red shrink-0"><Lock className="w-6 h-6" /></div>
                    <div>
                      <h4 className="text-lg font-orbitron text-ghost-white">AES-256 Core Encryption</h4>
                      <p className="font-rajdhani text-ghost-white/50 text-sm mt-1">Data is scrambled before it ever hits the transmission layer, completely neutralizing middle-man intercepts.</p>
                    </div>
                  </div>
                  <div className="flex items-start gap-4">
                    <div className="p-3 glass rounded-lg border border-neon-green/30 text-neon-green shrink-0"><Fingerprint className="w-6 h-6" /></div>
                    <div>
                      <h4 className="text-lg font-orbitron text-ghost-white">Biometric Auth Module</h4>
                      <p className="font-rajdhani text-ghost-white/50 text-sm mt-1">Lock down manager overrides and void limits to exact fingerprints. PIN codes belong in the past.</p>
                    </div>
                  </div>
                  <div className="flex items-start gap-4">
                    <div className="p-3 glass rounded-lg border border-electric-purple/30 text-electric-purple shrink-0"><ShieldCheck className="w-6 h-6" /></div>
                    <div>
                      <h4 className="text-lg font-orbitron text-ghost-white">PCI-DSS Level 1 Compliance</h4>
                      <p className="font-rajdhani text-ghost-white/50 text-sm mt-1">The highest tier of payment card security. Ghostwire shoulders the compliance burden so you don't have to.</p>
                    </div>
                  </div>
                </div>
              </motion.div>
              <motion.div initial={{ opacity: 0, scale: 0.9 }} whileInView={{ opacity: 1, scale: 1 }} viewport={{ once: true }} className="lg:w-1/2 relative">
                <div className="w-full aspect-square max-w-[500px] mx-auto relative glass rounded-full border-2 border-alert-red/20 flex items-center justify-center p-8">
                  <div className="absolute inset-0 rounded-full border border-alert-red/10 animate-[spin_10s_linear_infinite]"></div>
                  <div className="absolute inset-8 rounded-full border border-dashed border-alert-red/20 animate-[spin_15s_linear_infinite_reverse]"></div>
                  <div className="relative z-10 w-32 h-32 bg-deep-black rounded-full border-2 border-alert-red shadow-[0_0_50px_rgba(255,0,60,0.5)] flex items-center justify-center">
                    <Lock className="w-12 h-12 text-alert-red" />
                  </div>
                  <div className="absolute w-full h-1 bg-alert-red/50 shadow-neon-red top-1/2 -translate-y-1/2 animate-[pulse_2s_ease-in-out_infinite]"></div>
                </div>
              </motion.div>
            </div>
          </div>
        </section>

        {/* 5. LUSION-STYLE 3D TESTIMONIALS */}
        <section className="py-32 px-4 sm:px-6 lg:px-8 relative z-10 bg-deep-black">
          <div className="absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[400px] bg-electric-purple/10 blur-[150px] pointer-events-none rounded-full"></div>
          <div className="max-w-7xl mx-auto relative z-10">
            <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} className="text-center mb-20">
              <h2 className="text-4xl md:text-6xl font-orbitron text-ghost-white mb-4">OPERATOR <span className="text-electric-purple text-glow-purple">LOGS</span></h2>
              <p className="text-xl font-rajdhani text-ghost-white/60 max-w-2xl mx-auto">Transmissions from merchants who survived the upgrade.</p>
            </motion.div>

            <div className="grid grid-cols-1 md:grid-cols-3 gap-8 perspective-[1000px]">
              {reviews.map((review, idx) => (
                <motion.div key={idx} initial={{ opacity: 0, y: 40 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: idx * 0.2 }}>
                  <TiltTestimonialCard review={review} />
                </motion.div>
              ))}
            </div>
          </div>
        </section>

        {/* 6. NEURAL INTEGRATIONS (API / Extensibility Add-on) */}
        <section className="py-32 relative z-10 bg-[#0A0A0A] border-y border-white/5">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} className="text-center mb-16">
              <h2 className="text-4xl md:text-6xl font-orbitron text-ghost-white mb-4">NEURAL <span className="text-glow-purple text-electric-purple">INTEGRATIONS</span></h2>
              <p className="text-xl font-rajdhani text-ghost-white/60 max-w-2xl mx-auto">
                Your data is yours. Plug into the Ghostwire Matrix with open GraphQL APIs, instant webhooks, and native third-party ecosystem syncing.
              </p>
            </motion.div>

            <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
              {[
                { icon: Database, label: "Accounting Sync", desc: "QBO & Xero Auto-Push", color: "neon-green" },
                { icon: Webhook, label: "Delivery Apps", desc: "UberEats, DoorDash API", color: "cyber-cyan" },
                { icon: Blocks, label: "Loyalty Engines", desc: "Native CRM Integration", color: "electric-purple" },
                { icon: Link2, label: "Custom Endpoints", desc: "Open GraphQL Matrix", color: "ghost-white" }
              ].map((item, idx) => (
                <motion.div 
                  key={idx} initial={{ opacity: 0, y: 30 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: idx * 0.1 }}
                  className={`glass p-6 rounded-2xl border border-${item.color}/30 hover:border-${item.color} hover:bg-${item.color}/5 transition-all group flex flex-col items-center text-center`}
                >
                  <item.icon className={`w-10 h-10 text-${item.color} mb-4 opacity-70 group-hover:opacity-100 transition-opacity`} />
                  <h4 className="font-orbitron text-lg text-ghost-white mb-1">{item.label}</h4>
                  <p className="font-mono text-xs text-ghost-white/50">{item.desc}</p>
                </motion.div>
              ))}
            </div>
          </div>
        </section>

        {/* 7. HARDWARE ECOSYSTEM */}
        <section className="py-32 relative z-10 bg-deep-black">
          <div className="absolute right-0 top-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-cyber-cyan/5 blur-[120px] pointer-events-none rounded-full"></div>
          
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} className="mb-16 md:text-center">
              <h2 className="text-4xl md:text-6xl font-orbitron text-ghost-white mb-4">DEPLOYMENT <span className="text-glow-cyan text-cyber-cyan">HARDWARE</span></h2>
              <p className="text-xl font-rajdhani text-ghost-white/60 max-w-2xl md:mx-auto">Use your own devices, or upgrade to our encrypted, military-grade physical nodes designed to interface flawlessly with the Ghostwire Matrix.</p>
            </motion.div>

            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
              {/* Hardware 1 */}
              <motion.div initial={{ opacity: 0, y: 30 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: 0.1 }} className="glass rounded-2xl border border-white/5 hover:border-cyber-cyan/40 transition-all p-6 flex flex-col items-center text-center group">
                <div className="w-32 h-32 mb-8 relative flex items-center justify-center">
                  <div className="absolute inset-0 bg-cyber-cyan/10 rounded-full blur-xl group-hover:bg-cyber-cyan/20 transition-all"></div>
                  <Monitor className="w-16 h-16 text-cyber-cyan relative z-10" />
                </div>
                <h3 className="text-2xl font-orbitron text-ghost-white mb-2">The Mainframe</h3>
                <p className="font-rajdhani text-ghost-white/60">Sleek 15" dual-screen customer-facing registers with built-in NFC tap-to-pay and biometric operator login.</p>
              </motion.div>

              {/* Hardware 2 */}
              <motion.div initial={{ opacity: 0, y: 30 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: 0.2 }} className="glass rounded-2xl border border-white/5 hover:border-electric-purple/40 transition-all p-6 flex flex-col items-center text-center group">
                <div className="w-32 h-32 mb-8 relative flex items-center justify-center">
                  <div className="absolute inset-0 bg-electric-purple/10 rounded-full blur-xl group-hover:bg-electric-purple/20 transition-all"></div>
                  <Smartphone className="w-16 h-16 text-electric-purple relative z-10" />
                </div>
                <h3 className="text-2xl font-orbitron text-ghost-white mb-2">Mobile Matrix</h3>
                <p className="font-rajdhani text-ghost-white/60">Ruggedized handheld terminals for line-busting, tableside ordering, and warehouse inventory scanning.</p>
              </motion.div>

              {/* Hardware 3 */}
              <motion.div initial={{ opacity: 0, y: 30 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: 0.3 }} className="glass rounded-2xl border border-white/5 hover:border-neon-green/40 transition-all p-6 flex flex-col items-center text-center group">
                <div className="w-32 h-32 mb-8 relative flex items-center justify-center">
                  <div className="absolute inset-0 bg-neon-green/10 rounded-full blur-xl group-hover:bg-neon-green/20 transition-all"></div>
                  <Printer className="w-16 h-16 text-neon-green relative z-10" />
                </div>
                <h3 className="text-2xl font-orbitron text-ghost-white mb-2">KDS & Printers</h3>
                <p className="font-rajdhani text-ghost-white/60">Impact-resistant bump screens for chaotic kitchens, alongside thermal receipt nodes that never jam.</p>
              </motion.div>
            </div>
            
            <div className="mt-12 text-center">
               <Button variant="glass" size="lg" className="border-cyber-cyan/30 text-cyber-cyan hover:bg-cyber-cyan/10" onClick={() => handleRobotNavigation('/contact', 0, 50)}>
                  Request Hardware Specs
               </Button>
            </div>
          </div>
        </section>

        {/* 8. INFINITE CYBER MARQUEE */}
        <div className="py-6 bg-neon-green border-y border-neon-green/50 overflow-hidden relative z-20 flex whitespace-nowrap">
          <div className="animate-[marquee_20s_linear_infinite] flex gap-16 text-deep-black font-orbitron font-bold text-2xl tracking-widest items-center">
            <span>ZERO DOWNTIME</span> <Zap className="w-6 h-6" />
            <span>MILITARY ENCRYPTION</span> <ShieldCheck className="w-6 h-6" />
            <span>&lt; 12MS LATENCY</span> <Activity className="w-6 h-6" />
            <span>OFFLINE RESILIENCE</span> <WifiOff className="w-6 h-6" />
            <span>ZERO DOWNTIME</span> <Zap className="w-6 h-6" />
            <span>MILITARY ENCRYPTION</span> <ShieldCheck className="w-6 h-6" />
            <span>&lt; 12MS LATENCY</span> <Activity className="w-6 h-6" />
          </div>
        </div>

        {/* 9. MEGA CTA SECTION */}
        <section className="py-40 relative z-10 flex flex-col items-center justify-center text-center px-4 bg-deep-black">
          <div className="absolute inset-0 bg-cyber-cyan/5 blur-[150px] rounded-full w-full max-w-4xl mx-auto pointer-events-none"></div>
          <motion.div initial={{ opacity: 0, y: 50 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} className="relative z-10">
            <h2 className="text-5xl md:text-8xl font-orbitron text-ghost-white mb-8">READY TO <span className="text-glow-cyan">UPSCALE?</span></h2>
            <p className="text-xl md:text-2xl font-rajdhani text-ghost-white/60 mb-12 max-w-2xl mx-auto">Join thousands of high-volume merchants who have already escaped legacy POS systems.</p>
            <div className="flex flex-col sm:flex-row gap-6 justify-center">
              <Button variant="neon-cyan" size="lg" className="text-xl px-12" onClick={() => handleRobotNavigation('/contact', 0, 0)}>Deploy System Now</Button>
              <Button variant="glass" size="lg" className="text-xl px-12" onClick={() => handleRobotNavigation('/demo', 80, -20)}>Access Live Demo</Button>
            </div>
          </motion.div>
        </section>

      </main>
    </>
  );
}

================================================================================
FILE: app\about\page.tsx
================================================================================

'use client';

import React from 'react';
import { motion } from 'framer-motion';
import { Zap, Shield, Cpu, Code2, Users2, Building2 } from 'lucide-react';
import { GlowingBorder } from '@/components/ui/GlowingBorder';

export default function AboutPage() {
  const stats = [
    { label: 'Lines of Code', value: '4.2M+', color: 'neon-green' },
    { label: 'Global Nodes', value: '12,450', color: 'cyber-cyan' },
    { label: 'Uptime', value: '99.999%', color: 'electric-purple' },
    { label: 'Latency', value: '< 12ms', color: 'neon-green' },
  ];

  const architects = [
    { name: 'Kaelen Vance', role: 'Lead System Architect', image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&q=80', color: 'neon-green' },
    { name: 'Dr. Aris Thorne', role: 'Neural Net Director', image: 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?auto=format&fit=crop&q=80', color: 'cyber-cyan' },
    { name: 'Jax "Zero" Riven', role: 'Cryptographic Lead', image: 'https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?auto=format&fit=crop&q=80', color: 'electric-purple' },
  ];

  return (
    <main className="min-h-screen bg-deep-black pt-28 pb-20 relative z-10 overflow-hidden">
      
      {/* Background Decor */}
      <div className="absolute top-0 right-0 w-1/2 h-1/2 bg-cyber-cyan/5 blur-[150px] pointer-events-none -z-10"></div>
      
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        {/* Hero Section */}
        <div className="text-center mb-24 relative z-10">
          <motion.div initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }} className="inline-flex items-center space-x-2 glass px-4 py-2 rounded-full border border-cyber-cyan/30 mb-8">
            <Code2 className="w-4 h-4 text-cyber-cyan" />
            <span className="text-cyber-cyan font-mono text-sm uppercase tracking-wider">FILE: ORIGIN_STORY.SYS</span>
          </motion.div>
          <motion.h1 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-5xl md:text-7xl font-orbitron text-ghost-white mb-6">
            THE <span className="text-glow-cyan">ARCHITECTS</span>
          </motion.h1>
          <motion.p initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-xl font-rajdhani text-ghost-white/70 max-w-3xl mx-auto leading-relaxed">
            Ghostwire Systems was born from a singular frustration: legacy point-of-sale systems were slow, bloated, and crashed when you needed them most. We decided to rewrite the grid.
          </motion.p>
        </div>

        {/* The Manifesto */}
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-16 mb-32 items-center relative z-10">
          <motion.div initial={{ opacity: 0, x: -50 }} whileInView={{ opacity: 1, x: 0 }} viewport={{ once: true }}>
            <h2 className="text-3xl font-orbitron text-neon-green mb-6 border-l-4 border-neon-green pl-4">CORE DIRECTIVES</h2>
            <div className="space-y-6 font-rajdhani text-lg text-ghost-white/80">
              <p>
                In 2021, our founders were running high-volume hospitality venues. Every Friday night, the legacy cloud POS would buckle under the weight of a thousand concurrent transactions. Receipts wouldn't print. KDS screens froze.
              </p>
              <p>
                <strong className="text-cyber-cyan">Directive Alpha:</strong> A system must never go down. We built Ghostwire with an edge-computing first approach. Your local terminals talk to each other directly, bypassing the cloud until the internet stabilizes.
              </p>
              <p>
                <strong className="text-electric-purple">Directive Beta:</strong> Speed is survival. We stripped out the bloat of web-wrappers and built Ghostwire on a custom, high-performance rendering engine. Scans register in milliseconds. Screens swap instantly.
              </p>
            </div>
          </motion.div>
          
          {/* Stats Grid */}
          <motion.div initial={{ opacity: 0, x: 50 }} whileInView={{ opacity: 1, x: 0 }} viewport={{ once: true }} className="grid grid-cols-2 gap-4">
            {stats.map((stat, idx) => (
              <div key={idx} className={`glass p-6 rounded-2xl border border-${stat.color}/30 text-center hover:bg-${stat.color}/5 transition-colors`}>
                <p className={`text-4xl font-orbitron font-bold text-${stat.color} mb-2`}>{stat.value}</p>
                <p className="font-mono text-sm text-ghost-white/60 uppercase">{stat.label}</p>
              </div>
            ))}
          </motion.div>
        </div>

        {/* The Team */}
        <div className="mb-32 relative z-10">
          <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} className="text-center mb-16">
            <h2 className="text-4xl font-orbitron text-ghost-white mb-4">SYSTEM <span className="text-glow-purple">OPERATORS</span></h2>
            <p className="text-xl font-rajdhani text-ghost-white/60">The minds behind the matrix.</p>
          </motion.div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {architects.map((person, idx) => (
              <motion.div key={idx} initial={{ opacity: 0, y: 30 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: idx * 0.1 }}>
                <GlowingBorder color={person.color as 'green' | 'cyan' | 'purple'}>
                  <div className="glass p-6 rounded-xl border border-white/5 text-center flex flex-col items-center">
                    <div className="relative w-32 h-32 mb-6 rounded-full overflow-hidden border-2 border-white/10 group">
                      <div className={`absolute inset-0 bg-${person.color}/20 z-10 group-hover:opacity-0 transition-opacity duration-300`}></div>
                      <img src={person.image} alt={person.name} className="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500" />
                    </div>
                    <h3 className={`text-2xl font-orbitron text-${person.color} mb-1`}>{person.name}</h3>
                    <p className="font-mono text-sm text-ghost-white/50">{person.role}</p>
                  </div>
                </GlowingBorder>
              </motion.div>
            ))}
          </div>
        </div>

        {/* Global Reach */}
        <motion.div initial={{ opacity: 0, y: 40 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} className="glass border border-ghost-white/10 rounded-2xl p-8 md:p-12 text-center relative overflow-hidden z-10">
          <div className="absolute inset-0 cyber-grid opacity-20"></div>
          <Building2 className="w-16 h-16 text-cyber-cyan mx-auto mb-6 opacity-80" />
          <h2 className="text-3xl font-orbitron text-ghost-white mb-4 relative z-10">OPERATING IN 42 COUNTRIES</h2>
          <p className="font-rajdhani text-lg text-ghost-white/70 max-w-2xl mx-auto relative z-10">
            From underground cyber-cafes in Neo-Tokyo to massive warehouse distribution centers in Berlin, Ghostwire is scaling globally to meet the demands of modern enterprise.
          </p>
        </motion.div>

      </div>
    </main>
  );
}

================================================================================
FILE: app\api\chat\route.ts
================================================================================

import { NextResponse } from 'next/server';

export async function POST(req: Request) {
  try {
    const { messages } = await req.json();

    // Grab the Groq API key securely
    const apiKey = process.env.GROQ_API_KEY;

    // LUSION LEVEL UX: Never crash the UI. If the API key is missing, 
    // we simulate a response so the presentation still looks flawless.
    if (!apiKey) {
      const mockReplies = [
        "I am currently operating in offline-simulation mode. Please add a GROQ_API_KEY to your environment variables to unlock my neural net.",
        "Mainframe uplink unavailable (Missing API Key). However, I can still confirm that Ghostwire possesses absolute offline resilience.",
        "My quantum processors are throttled. Insert a valid API key to establish a live connection to the Groq matrix.",
        "Even in offline mode, Ghostwire terminals continue to process transactions. Just like I am talking to you now."
      ];
      
      const randomReply = mockReplies[Math.floor(Math.random() * mockReplies.length)];
      
      // Simulate an organic network delay
      await new Promise(resolve => setTimeout(resolve, 1500));
      
      return NextResponse.json({ reply: randomReply });
    }

    // 1. CONTENT AWARENESS: Inject your entire company knowledge base here
    const systemPrompt = `You are Grok, the Ghostwire Assistant. A highly advanced, slightly sassy, cyberpunk AI integrated into the Ghostwire Systems network. Keep responses extremely concise (1-3 sentences max).

    KNOWLEDGE BASE:
    - Core Features: Absolute Offline Resilience, Omni-Channel Tap-to-Pay, AI-Driven Inventory, Multi-Location Sync.
    - Hardware: Hardware agnostic. Runs on iOS, Android, web browsers. We also sell pre-configured bundles.
    - Pricing Tiers: LITE NODE ($49/mo), PRO GRID ($129/mo), ENTERPRISE MATRIX (Custom).
    - Tone: Confident, futuristic, slightly sarcastic but extremely helpful.`;

    const formattedMessages = [
      { role: "system", content: systemPrompt },
      ...messages.map((m: {role: string, content: string}) => ({
        role: m.role === 'assistant' ? 'assistant' : 'user',
        content: m.content
      }))
    ];

    // 2. USE GROQ: LLaMA-3 8B
    const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
      method: "POST",
      headers: {
        "Authorization": `Bearer ${apiKey}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: "llama3-8b-8192",
        messages: formattedMessages,
        temperature: 0.7,
        max_tokens: 150
      })
    });

    const data = await response.json();

    if (data.error) {
      return NextResponse.json({ error: data.error.message }, { status: 500 });
    }

    return NextResponse.json({ reply: data.choices[0].message.content });

  } catch (error) {
    console.error("Chat API Crash:", error);
    return NextResponse.json({ reply: "Critical system fault. Comm-link severed." }, { status: 500 });
  }
}

================================================================================
FILE: app\contact\page.tsx
================================================================================

'use client';

import React, { useState } from 'react';
import { motion } from 'framer-motion';
import { Send, Terminal, Mail, MapPin, Phone, ShieldAlert } from 'lucide-react';
import { Button } from '@/components/ui/Button';

export default function ContactPage() {
  const [formState, setFormState] = useState({
    name: '',
    email: '',
    subject: 'hardware',
    message: ''
  });
  const [isTransmitting, setIsTransmitting] = useState(false);
  const [transmitSuccess, setTransmitSuccess] = useState(false);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    setIsTransmitting(true);
    
    // Simulate network delay
    setTimeout(() => {
      setIsTransmitting(false);
      setTransmitSuccess(true);
      setFormState({ name: '', email: '', subject: 'hardware', message: '' });
      
      setTimeout(() => setTransmitSuccess(false), 5000);
    }, 2000);
  };

  return (
    <main className="min-h-screen bg-deep-black pt-28 pb-20 relative z-10 overflow-hidden">
      
      <div className="absolute top-1/4 left-1/4 w-[600px] h-[600px] bg-electric-purple/5 blur-[150px] pointer-events-none -z-10"></div>

      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <div className="text-center mb-16 relative z-10">
          <motion.h1 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-5xl md:text-7xl font-orbitron text-ghost-white mb-6">
            SECURE <span className="text-glow-purple">COMM-LINK</span>
          </motion.h1>
          <motion.p initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-xl font-rajdhani text-ghost-white/70 max-w-2xl mx-auto">
            Open a direct channel to our deployment architects. We respond to all encrypted transmissions within 24 hours.
          </motion.p>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-3 gap-12 relative z-10">
          
          {/* Contact Info / Terminal */}
          <motion.div initial={{ opacity: 0, x: -50 }} animate={{ opacity: 1, x: 0 }} className="lg:col-span-1 space-y-8">
            <div className="glass p-8 rounded-2xl border border-ghost-white/10">
              <h3 className="text-xl font-orbitron text-cyber-cyan mb-6 border-b border-cyber-cyan/20 pb-4">NETWORK NODES</h3>
              
              <div className="space-y-6">
                <div className="flex items-start gap-4">
                  <div className="p-3 bg-neon-green/10 rounded text-neon-green"><Mail className="w-5 h-5" /></div>
                  <div>
                    <p className="font-mono text-sm text-ghost-white/50">ENCRYPTED COMM</p>
                    <p className="font-rajdhani text-lg text-ghost-white">deploy@ghostwire.sys</p>
                  </div>
                </div>
                
                <div className="flex items-start gap-4">
                  <div className="p-3 bg-cyber-cyan/10 rounded text-cyber-cyan"><Phone className="w-5 h-5" /></div>
                  <div>
                    <p className="font-mono text-sm text-ghost-white/50">VOICE PROTOCOL</p>
                    <p className="font-rajdhani text-lg text-ghost-white">+1 (800) 555-0199</p>
                  </div>
                </div>
                
                <div className="flex items-start gap-4">
                  <div className="p-3 bg-electric-purple/10 rounded text-electric-purple"><MapPin className="w-5 h-5" /></div>
                  <div>
                    <p className="font-mono text-sm text-ghost-white/50">HQ SERVER LOCATION</p>
                    <p className="font-rajdhani text-lg text-ghost-white leading-tight">Sector 4, Neo-Valley<br/>San Francisco, CA 94105</p>
                  </div>
                </div>
              </div>
            </div>

            {/* Faux Security Readout */}
            <div className="glass p-6 rounded-2xl border border-alert-red/30 bg-alert-red/5 font-mono text-xs">
              <div className="flex items-center gap-2 text-alert-red mb-4">
                <ShieldAlert className="w-4 h-4" /> <span className="tracking-widest">SYSTEM SECURITY</span>
              </div>
              <p className="text-ghost-white/50 mb-1">&gt; Connection: AES-256 Secured</p>
              <p className="text-ghost-white/50 mb-1">&gt; IP Trace: Masked</p>
              <p className="text-ghost-white/50 mb-1">&gt; Form Integrity: Verified</p>
              <p className="text-neon-green mt-4 animate-pulse">Awaiting transmission...</p>
            </div>
          </motion.div>

          {/* The Form */}
          <motion.div initial={{ opacity: 0, x: 50 }} animate={{ opacity: 1, x: 0 }} className="lg:col-span-2 glass p-8 md:p-12 rounded-2xl border border-electric-purple/40 relative">
            
            {transmitSuccess ? (
              <div className="absolute inset-0 flex flex-col items-center justify-center bg-deep-black/90 rounded-2xl border border-neon-green z-20">
                <Terminal className="w-16 h-16 text-neon-green mb-4" />
                <h3 className="text-3xl font-orbitron text-neon-green mb-2">TRANSMISSION SENT</h3>
                <p className="font-mono text-ghost-white/70">Our architects will contact you shortly.</p>
              </div>
            ) : null}

            <form onSubmit={handleSubmit} className="space-y-6">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div className="space-y-2">
                  <label className="font-mono text-xs text-electric-purple tracking-wider">OPERATOR NAME</label>
                  <input 
                    type="text" required
                    value={formState.name} onChange={e => setFormState({...formState, name: e.target.value})}
                    className="w-full bg-deep-black/50 border border-white/10 rounded-lg px-4 py-3 font-rajdhani text-ghost-white focus:outline-none focus:border-electric-purple focus:shadow-[0_0_10px_rgba(191,0,255,0.3)] transition-all"
                    placeholder="Enter your name"
                  />
                </div>
                <div className="space-y-2">
                  <label className="font-mono text-xs text-electric-purple tracking-wider">RETURN COMM-LINK (EMAIL)</label>
                  <input 
                    type="email" required
                    value={formState.email} onChange={e => setFormState({...formState, email: e.target.value})}
                    className="w-full bg-deep-black/50 border border-white/10 rounded-lg px-4 py-3 font-rajdhani text-ghost-white focus:outline-none focus:border-electric-purple focus:shadow-[0_0_10px_rgba(191,0,255,0.3)] transition-all"
                    placeholder="name@company.com"
                  />
                </div>
              </div>

              <div className="space-y-2">
                <label className="font-mono text-xs text-electric-purple tracking-wider">INQUIRY TYPE</label>
                <select 
                  value={formState.subject} onChange={e => setFormState({...formState, subject: e.target.value})}
                  className="w-full bg-deep-black/50 border border-white/10 rounded-lg px-4 py-3 font-rajdhani text-ghost-white focus:outline-none focus:border-electric-purple appearance-none"
                >
                  <option value="hardware">Hardware Bundle Pricing</option>
                  <option value="enterprise">Enterprise Deployment</option>
                  <option value="support">Technical Support</option>
                  <option value="other">Other Transmission</option>
                </select>
              </div>

              <div className="space-y-2">
                <label className="font-mono text-xs text-electric-purple tracking-wider">ENCRYPTED MESSAGE</label>
                <textarea 
                  required rows={6}
                  value={formState.message} onChange={e => setFormState({...formState, message: e.target.value})}
                  className="w-full bg-deep-black/50 border border-white/10 rounded-lg px-4 py-3 font-rajdhani text-ghost-white focus:outline-none focus:border-electric-purple focus:shadow-[0_0_10px_rgba(191,0,255,0.3)] transition-all resize-none"
                  placeholder="Detail your operational requirements..."
                ></textarea>
              </div>

              <Button 
                type="submit" 
                variant="neon-purple" 
                size="lg" 
                className="w-full flex justify-center items-center gap-3"
                disabled={isTransmitting}
              >
                {isTransmitting ? (
                  <span className="animate-pulse">UPLOADING DATA PACKETS...</span>
                ) : (
                  <>INITIATE TRANSMISSION <Send className="w-5 h-5" /></>
                )}
              </Button>
            </form>
          </motion.div>

        </div>
      </div>
    </main>
  );
}

================================================================================
FILE: app\demo\page.tsx
================================================================================

'use client';

import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { ShoppingCart, ChefHat, Plus, Trash2, Receipt, ArrowRight, DollarSign, ScanLine, Users, CheckCircle2, Factory, Activity, Globe, Server } from 'lucide-react';
import { Button } from '@/components/ui/Button';
import { formatPrice } from '@/lib/utils';

export default function DemoPage() {
  const [activeTab, setActiveTab] = useState<'retail' | 'fnb' | 'erp'>('retail');

  // ==========================================
  // RETAIL STATE (POS Checkout)
  // ==========================================
  const retailProducts = [
    { id: 1, name: 'Quantum Jacket', price: 120.00, color: 'neon-green' },
    { id: 2, name: 'Neural Visor', price: 45.50, color: 'cyber-cyan' },
    { id: 3, name: 'Hover-Boots v2', price: 180.00, color: 'electric-purple' },
    { id: 4, name: 'Energy Cell', price: 15.00, color: 'neon-green' },
  ];
  const [cart, setCart] = useState<{id: number, name: string, price: number, qty: number}[]>([]);
  const [loyaltyActive, setLoyaltyActive] = useState(false);
  const [checkoutSuccess, setCheckoutSuccess] = useState(false);

  const addToCart = (product: any) => {
    const existing = cart.find(item => item.id === product.id);
    if (existing) {
      setCart(cart.map(item => item.id === product.id ? { ...item, qty: item.qty + 1 } : item));
    } else {
      setCart([...cart, { ...product, qty: 1 }]);
    }
  };

  const simulateScan = () => {
    const randomProduct = retailProducts[Math.floor(Math.random() * retailProducts.length)];
    addToCart(randomProduct);
  };

  const processPayment = () => {
    if (cart.length === 0) return;
    setCheckoutSuccess(true);
    setTimeout(() => {
      setCheckoutSuccess(false);
      setCart([]);
      setLoyaltyActive(false);
    }, 3000);
  };

  const cartSubtotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
  const discount = loyaltyActive ? cartSubtotal * 0.10 : 0;
  const tax = (cartSubtotal - discount) * 0.08;
  const cartTotal = cartSubtotal - discount + tax;


  // ==========================================
  // F&B STATE (Recipe & KDS Calculator)
  // ==========================================
  const [dishName, setDishName] = useState('Cyber-Burger Matrix');
  const [sellingPrice, setSellingPrice] = useState(15.99);
  const [batchYield, setBatchYield] = useState(1);
  const [ingredients, setIngredients] = useState([
    { id: 1, name: 'Syn-Beef Patty', cost: 2.50 },
    { id: 2, name: 'Neon Brioche Bun', cost: 0.80 },
    { id: 3, name: 'Cheddar Core', cost: 0.50 },
  ]);
  const [kdsTickets, setKdsTickets] = useState<{id: number, name: string, qty: number, time: string}[]>([]);

  const addIngredient = () => setIngredients([...ingredients, { id: Date.now(), name: 'New Ingredient', cost: 1.00 }]);
  const updateIngredient = (id: number, field: string, value: string | number) => setIngredients(ingredients.map(ing => ing.id === id ? { ...ing, [field]: value } : ing));
  const removeIngredient = (id: number) => setIngredients(ingredients.filter(ing => ing.id !== id));

  const fireToKitchen = () => {
    const newTicket = {
      id: Date.now(),
      name: dishName,
      qty: batchYield,
      time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' })
    };
    setKdsTickets([newTicket, ...kdsTickets].slice(0, 4)); // Keep max 4 tickets on screen
  };

  const baseCost = ingredients.reduce((sum, ing) => sum + (Number(ing.cost) || 0), 0);
  const totalCost = baseCost * batchYield;
  const totalRevenue = sellingPrice * batchYield;
  const profit = totalRevenue - totalCost;
  const margin = sellingPrice > 0 ? (profit / totalRevenue) * 100 : 0;


  // ==========================================
  // ENTERPRISE ERP STATE (Live Telemetry)
  // ==========================================
  const [liveData, setLiveData] = useState({
    revenue: 145902.50,
    orders: 3402,
    activeTerminals: 142,
    cpuLoad: 24,
  });

  useEffect(() => {
    if (activeTab !== 'erp') return;
    const interval = setInterval(() => {
      setLiveData(prev => ({
        revenue: prev.revenue + (Math.random() * 150),
        orders: prev.orders + Math.floor(Math.random() * 3),
        activeTerminals: 140 + Math.floor(Math.random() * 5),
        cpuLoad: 20 + Math.floor(Math.random() * 15),
      }));
    }, 2000);
    return () => clearInterval(interval);
  }, [activeTab]);


  return (
    <main className="min-h-screen bg-deep-black pt-28 pb-20 relative z-10 overflow-hidden">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        {/* Header */}
        <div className="text-center mb-12">
          <h1 className="text-4xl md:text-6xl font-orbitron text-ghost-white mb-4">
            SYSTEM <span className="text-glow-cyan">SIMULATION</span>
          </h1>
          <p className="font-rajdhani text-xl text-ghost-white/60">
            Interact with live Ghostwire calculation modules.
          </p>
        </div>

        {/* Custom Tabs */}
        <div className="flex justify-center mb-12 flex-wrap gap-4">
          <div className="glass p-2 rounded-xl border border-ghost-white/10 flex flex-wrap justify-center gap-2">
            <button onClick={() => setActiveTab('retail')} className={`flex items-center gap-2 px-6 py-3 rounded-lg font-orbitron transition-all ${activeTab === 'retail' ? 'bg-neon-green text-deep-black shadow-neon-green' : 'text-ghost-white hover:bg-white/5'}`}>
              <ShoppingCart className="w-5 h-5" /> Retail Protocol
            </button>
            <button onClick={() => setActiveTab('fnb')} className={`flex items-center gap-2 px-6 py-3 rounded-lg font-orbitron transition-all ${activeTab === 'fnb' ? 'bg-cyber-cyan text-deep-black shadow-neon-cyan' : 'text-ghost-white hover:bg-white/5'}`}>
              <ChefHat className="w-5 h-5" /> Culinary Matrix
            </button>
            <button onClick={() => setActiveTab('erp')} className={`flex items-center gap-2 px-6 py-3 rounded-lg font-orbitron transition-all ${activeTab === 'erp' ? 'bg-electric-purple text-deep-black shadow-neon-purple' : 'text-ghost-white hover:bg-white/5'}`}>
              <Factory className="w-5 h-5" /> Enterprise ERP
            </button>
          </div>
        </div>

        {/* Tab Content */}
        <div className="relative min-h-[600px]">
          <AnimatePresence mode="wait">
            
            {/* ======================= RETAIL MODE ======================= */}
            {activeTab === 'retail' && (
              <motion.div key="retail" initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -20 }} className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                
                {/* Product Input Grid */}
                <div className="lg:col-span-2 glass p-6 rounded-2xl border border-neon-green/30 flex flex-col">
                  <div className="flex justify-between items-center border-b border-neon-green/20 pb-4 mb-6">
                    <h2 className="text-2xl font-orbitron text-neon-green">Terminal Input</h2>
                    <Button variant="glass" size="sm" onClick={simulateScan} className="flex gap-2 items-center text-neon-green border-neon-green hover:bg-neon-green hover:text-black">
                      <ScanLine className="w-4 h-4" /> Simulate Scan
                    </Button>
                  </div>
                  
                  <div className="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6 flex-grow">
                    {retailProducts.map(product => (
                      <button key={product.id} onClick={() => addToCart(product)} className="bg-deep-black border border-ghost-white/10 rounded-xl p-4 text-left hover:border-neon-green hover:shadow-neon-green transition-all group">
                        <div className={`w-3 h-3 rounded-full bg-${product.color} mb-3 group-hover:animate-pulse`}></div>
                        <p className="font-orbitron text-ghost-white text-sm mb-1">{product.name}</p>
                        <p className="font-mono text-neon-green">{formatPrice(product.price)}</p>
                      </button>
                    ))}
                  </div>

                  {/* Customer Loyalty Simulator */}
                  <div className="bg-neon-green/5 border border-neon-green/20 rounded-xl p-4 flex items-center justify-between">
                    <div className="flex items-center gap-3 text-ghost-white">
                      <Users className="w-6 h-6 text-neon-green" />
                      <div>
                        <p className="font-orbitron text-sm">Customer Profile</p>
                        <p className="font-rajdhani text-xs text-ghost-white/50">Attach member for 10% off</p>
                      </div>
                    </div>
                    <button 
                      onClick={() => setLoyaltyActive(!loyaltyActive)}
                      className={`px-4 py-2 rounded font-mono text-sm transition-all ${loyaltyActive ? 'bg-neon-green text-black shadow-neon-green' : 'bg-dark-grey text-ghost-white border border-white/20 hover:border-neon-green'}`}
                    >
                      {loyaltyActive ? 'Linked (John D.)' : 'Link Member'}
                    </button>
                  </div>
                </div>

                {/* Cart Register */}
                <div className="glass p-6 rounded-2xl border border-ghost-white/10 flex flex-col h-[600px] relative overflow-hidden">
                  <h2 className="text-2xl font-orbitron text-ghost-white mb-6 flex items-center gap-2">
                    <Receipt className="text-neon-green" /> Current Ticket
                  </h2>
                  
                  <div className="flex-grow overflow-y-auto pr-2 space-y-4 mb-6">
                    {cart.length === 0 ? (
                      <p className="text-ghost-white/40 font-mono text-center mt-10">NO ITEMS SCANNED</p>
                    ) : (
                      cart.map(item => (
                        <motion.div initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} key={item.id} className="flex justify-between items-center text-sm font-rajdhani border-b border-white/5 pb-2">
                          <div>
                            <p className="text-ghost-white">{item.name}</p>
                            <p className="text-ghost-white/50">Qty: {item.qty} x {formatPrice(item.price)}</p>
                          </div>
                          <p className="font-mono text-neon-green">{formatPrice(item.price * item.qty)}</p>
                        </motion.div>
                      ))
                    )}
                  </div>

                  <div className="border-t border-white/10 pt-4 space-y-2 mb-6">
                    <div className="flex justify-between text-ghost-white/70 font-mono text-sm"><span>Subtotal</span><span>{formatPrice(cartSubtotal)}</span></div>
                    {loyaltyActive && <div className="flex justify-between text-neon-green font-mono text-sm"><span>Loyalty (-10%)</span><span>-{formatPrice(discount)}</span></div>}
                    <div className="flex justify-between text-ghost-white/70 font-mono text-sm"><span>Tax (8%)</span><span>{formatPrice(tax)}</span></div>
                    <div className="flex justify-between text-ghost-white font-orbitron text-2xl mt-2 pt-2 border-t border-white/10">
                      <span>TOTAL</span><span className="text-neon-green">{formatPrice(cartTotal)}</span>
                    </div>
                  </div>

                  <Button variant="neon-green" className="w-full flex justify-center items-center gap-2" onClick={processPayment} disabled={cart.length === 0}>
                    Process Payment <ArrowRight className="w-4 h-4" />
                  </Button>

                  {/* Checkout Success Overlay */}
                  <AnimatePresence>
                    {checkoutSuccess && (
                      <motion.div initial={{ opacity: 0, y: 50 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, scale: 0.9 }} className="absolute inset-0 bg-deep-black/95 backdrop-blur-md flex flex-col items-center justify-center p-6 border border-neon-green z-20">
                        <CheckCircle2 className="w-20 h-20 text-neon-green mb-4 shadow-neon-green rounded-full" />
                        <h3 className="text-2xl font-orbitron text-ghost-white mb-2">Transaction Approved</h3>
                        <p className="font-mono text-neon-green text-xl mb-6">{formatPrice(cartTotal)}</p>
                        <div className="w-full border-t border-dashed border-white/20 pt-4 font-mono text-xs text-ghost-white/50 text-center space-y-1">
                          <p>GHOSTWIRE POS SYSTEMS</p>
                          <p>AUTH CODE: GW-{Math.floor(Math.random() * 100000)}</p>
                          <p>Thank you for your business.</p>
                        </div>
                      </motion.div>
                    )}
                  </AnimatePresence>
                </div>
              </motion.div>
            )}

            {/* ======================= F&B CULINARY MODE ======================= */}
            {activeTab === 'fnb' && (
              <motion.div key="fnb" initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -20 }} className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                {/* Recipe Builder */}
                <div className="glass p-8 rounded-2xl border border-cyber-cyan/30 flex flex-col">
                  <div className="flex flex-col sm:flex-row justify-between items-start sm:items-end mb-8 border-b border-cyber-cyan/20 pb-6 gap-4">
                    <div className="w-full sm:w-1/2">
                      <label className="text-cyber-cyan font-mono text-xs mb-1 block">MENU ITEM</label>
                      <input type="text" value={dishName} onChange={(e) => setDishName(e.target.value)} className="w-full bg-transparent border-b border-ghost-white/20 text-2xl font-orbitron text-ghost-white focus:outline-none focus:border-cyber-cyan pb-1" />
                    </div>
                    <div className="w-full sm:w-1/4">
                      <label className="text-cyber-cyan font-mono text-xs mb-1 block">SALE PRICE</label>
                      <div className="relative">
                        <DollarSign className="absolute left-0 top-1 w-5 h-5 text-ghost-white/50" />
                        <input type="number" value={sellingPrice} onChange={(e) => setSellingPrice(Number(e.target.value))} className="w-full bg-transparent border-b border-ghost-white/20 text-2xl font-mono text-cyber-cyan focus:outline-none focus:border-cyber-cyan pl-6 pb-1" />
                      </div>
                    </div>
                    <div className="w-full sm:w-1/4">
                      <label className="text-cyber-cyan font-mono text-xs mb-1 block">YIELD (BATCH)</label>
                      <input type="number" value={batchYield} min="1" onChange={(e) => setBatchYield(Number(e.target.value))} className="w-full bg-transparent border-b border-ghost-white/20 text-2xl font-mono text-ghost-white focus:outline-none focus:border-cyber-cyan pb-1" />
                    </div>
                  </div>

                  <div className="flex-grow space-y-4 mb-6 overflow-y-auto pr-2 max-h-[250px]">
                    <div className="flex justify-between text-ghost-white/50 font-mono text-xs px-2">
                      <span>INGREDIENT</span>
                      <span>UNIT COST</span>
                    </div>
                    {ingredients.map((ing) => (
                      <div key={ing.id} className="flex gap-4 items-center bg-deep-black/50 p-2 rounded border border-white/5 focus-within:border-cyber-cyan/50 transition-colors">
                        <input type="text" value={ing.name} onChange={(e) => updateIngredient(ing.id, 'name', e.target.value)} className="flex-grow bg-transparent text-ghost-white font-rajdhani focus:outline-none" />
                        <div className="relative w-24">
                          <DollarSign className="absolute left-1 top-1 w-4 h-4 text-ghost-white/50" />
                          <input type="number" step="0.01" value={ing.cost} onChange={(e) => updateIngredient(ing.id, 'cost', parseFloat(e.target.value) || 0)} className="w-full bg-transparent text-cyber-cyan font-mono focus:outline-none pl-6" />
                        </div>
                        <button onClick={() => removeIngredient(ing.id)} className="text-alert-red hover:text-red-400 p-1"><Trash2 className="w-4 h-4" /></button>
                      </div>
                    ))}
                    <Button variant="glass" size="sm" onClick={addIngredient} className="w-full flex justify-center items-center gap-2 border-dashed border-cyber-cyan/30 text-cyber-cyan hover:border-cyber-cyan mt-4">
                      <Plus className="w-4 h-4" /> Add Ingredient
                    </Button>
                  </div>
                  
                  {/* Action Button */}
                  <Button variant="neon-cyan" className="w-full mt-auto" onClick={fireToKitchen}>
                    Fire to KDS Display
                  </Button>
                </div>

                {/* Dashboard & KDS View */}
                <div className="flex flex-col gap-6">
                  {/* Margin Dashboard */}
                  <div className="glass p-6 rounded-2xl border border-ghost-white/10 relative overflow-hidden">
                    <div className="absolute top-0 right-0 w-32 h-32 bg-cyber-cyan/10 blur-[50px] rounded-full"></div>
                    <h2 className="text-xl font-orbitron text-ghost-white mb-4">Batch Analysis</h2>
                    <div className="grid grid-cols-2 gap-4">
                      <div className="bg-deep-black/60 p-4 rounded-xl border border-white/5">
                        <p className="text-ghost-white/50 font-mono text-xs mb-1">TOTAL COST</p>
                        <p className="text-2xl font-mono text-alert-red">{formatPrice(totalCost)}</p>
                      </div>
                      <div className="bg-deep-black/60 p-4 rounded-xl border border-white/5">
                        <p className="text-ghost-white/50 font-mono text-xs mb-1">TOTAL REVENUE</p>
                        <p className="text-2xl font-mono text-neon-green">{formatPrice(totalRevenue)}</p>
                      </div>
                      <div className="bg-deep-black/60 p-4 rounded-xl border border-white/5">
                        <p className="text-ghost-white/50 font-mono text-xs mb-1">GROSS PROFIT</p>
                        <p className="text-2xl font-mono text-cyber-cyan">{formatPrice(profit)}</p>
                      </div>
                      <div className={`p-4 rounded-xl border ${margin >= 70 ? 'bg-neon-green/10 border-neon-green/30' : margin >= 30 ? 'bg-yellow-500/10 border-yellow-500/30' : 'bg-alert-red/10 border-alert-red/30'}`}>
                        <p className="text-ghost-white/70 font-mono text-xs mb-1">MARGIN %</p>
                        <p className={`text-2xl font-orbitron font-bold ${margin >= 70 ? 'text-neon-green' : margin >= 30 ? 'text-yellow-500' : 'text-alert-red'}`}>{margin.toFixed(1)}%</p>
                      </div>
                    </div>
                  </div>

                  {/* KDS Simulator */}
                  <div className="glass p-6 rounded-2xl border border-cyber-cyan/20 flex-grow flex flex-col">
                    <h2 className="text-xl font-orbitron text-cyber-cyan mb-4 flex items-center gap-2"><ChefHat className="w-5 h-5" /> Live KDS Screen</h2>
                    <div className="flex-grow bg-deep-black/50 rounded-xl p-4 grid grid-cols-2 gap-4 overflow-hidden border border-white/5">
                      {kdsTickets.length === 0 ? (
                         <div className="col-span-2 flex items-center justify-center text-ghost-white/30 font-mono text-sm">NO ACTIVE TICKETS</div>
                      ) : (
                        <AnimatePresence>
                          {kdsTickets.map((ticket) => (
                            <motion.div key={ticket.id} initial={{ scale: 0.8, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} className="bg-white/5 border-l-4 border-cyber-cyan rounded p-3 shadow-neon-cyan flex flex-col justify-between">
                              <div>
                                <div className="flex justify-between items-start mb-2 border-b border-white/10 pb-2">
                                  <span className="font-orbitron font-bold text-ghost-white">#{ticket.id.toString().slice(-4)}</span>
                                  <span className="font-mono text-xs text-cyber-cyan">{ticket.time}</span>
                                </div>
                                <p className="font-rajdhani text-lg text-ghost-white leading-tight">{ticket.qty}x {ticket.name}</p>
                              </div>
                              <button onClick={() => setKdsTickets(kdsTickets.filter(t => t.id !== ticket.id))} className="mt-4 text-xs font-mono bg-cyber-cyan/20 text-cyber-cyan py-1 rounded hover:bg-cyber-cyan hover:text-black transition-colors">Mark Complete</button>
                            </motion.div>
                          ))}
                        </AnimatePresence>
                      )}
                    </div>
                  </div>
                </div>
              </motion.div>
            )}

            {/* ======================= ENTERPRISE ERP MODE ======================= */}
            {activeTab === 'erp' && (
              <motion.div key="erp" initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -20 }} className="w-full">
                
                <div className="glass p-8 rounded-2xl border border-electric-purple/40 relative overflow-hidden h-[600px] flex flex-col">
                  {/* Decorative Radars/Grids */}
                  <div className="absolute top-0 right-0 w-[500px] h-[500px] bg-electric-purple/5 rounded-full blur-[80px] pointer-events-none"></div>
                  <div className="absolute inset-0 cyber-grid opacity-20 pointer-events-none"></div>
                  
                  <div className="flex justify-between items-center mb-10 relative z-10 border-b border-electric-purple/20 pb-4">
                    <h2 className="text-3xl font-orbitron text-electric-purple flex items-center gap-3">
                      <Globe className="w-8 h-8" /> Global Control Center
                    </h2>
                    <div className="flex items-center gap-2 bg-neon-green/10 text-neon-green px-3 py-1 rounded-full border border-neon-green/30">
                      <div className="w-2 h-2 rounded-full bg-neon-green animate-pulse"></div>
                      <span className="font-mono text-xs">ALL SYSTEMS NOMINAL</span>
                    </div>
                  </div>

                  {/* Live Stat Cards */}
                  <div className="grid grid-cols-1 md:grid-cols-4 gap-6 relative z-10 mb-10">
                    <div className="bg-deep-black/80 border border-electric-purple/30 rounded-xl p-6 shadow-[0_0_15px_rgba(191,0,255,0.1)]">
                       <p className="text-ghost-white/50 font-mono text-sm mb-2 flex items-center gap-2"><DollarSign className="w-4 h-4 text-neon-green" /> GROSS VOLUME</p>
                       <p className="text-4xl font-mono text-ghost-white">{formatPrice(liveData.revenue)}</p>
                    </div>
                    <div className="bg-deep-black/80 border border-electric-purple/30 rounded-xl p-6 shadow-[0_0_15px_rgba(191,0,255,0.1)]">
                       <p className="text-ghost-white/50 font-mono text-sm mb-2 flex items-center gap-2"><Activity className="w-4 h-4 text-cyber-cyan" /> TRANSACTIONS</p>
                       <p className="text-4xl font-mono text-ghost-white">{liveData.orders.toLocaleString()}</p>
                    </div>
                    <div className="bg-deep-black/80 border border-electric-purple/30 rounded-xl p-6 shadow-[0_0_15px_rgba(191,0,255,0.1)]">
                       <p className="text-ghost-white/50 font-mono text-sm mb-2 flex items-center gap-2"><Server className="w-4 h-4 text-electric-purple" /> ACTIVE NODES</p>
                       <p className="text-4xl font-mono text-ghost-white">{liveData.activeTerminals}</p>
                    </div>
                    <div className="bg-deep-black/80 border border-electric-purple/30 rounded-xl p-6 shadow-[0_0_15px_rgba(191,0,255,0.1)]">
                       <p className="text-ghost-white/50 font-mono text-sm mb-2 flex items-center gap-2"><Factory className="w-4 h-4 text-alert-red" /> CLOUD LOAD</p>
                       <p className="text-4xl font-mono text-ghost-white">{liveData.cpuLoad}%</p>
                    </div>
                  </div>

                  {/* Faux Terminal Log */}
                  <div className="flex-grow bg-deep-black/90 border border-white/10 rounded-xl p-4 font-mono text-xs text-ghost-white/60 relative z-10 overflow-hidden flex flex-col justify-end">
                     <p className="text-neon-green mb-2">Ghostwire ERP Terminal v2.4.1 connected.</p>
                     <p> &gt; [SYS] Syncing inventory from Node-A4...</p>
                     <p> &gt; [LOG] Purchase order #PO-992 auto-generated (Low stock: Syn-Beef).</p>
                     <p> &gt; [NET] Secure connection established with Payment Gateway.</p>
                     <p> &gt; [DATA] Polling 142 active registers for live transaction telemetry...</p>
                     <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ repeat: Infinity, duration: 2 }} className="text-electric-purple mt-2">
                       Awaiting operator command_ <span className="animate-pulse">|</span>
                     </motion.p>
                  </div>

                </div>
              </motion.div>
            )}

          </AnimatePresence>
        </div>

      </div>
    </main>
  );
}

================================================================================
FILE: app\portal\page.tsx
================================================================================

'use client';

import React, { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { ShieldCheck, Key, Terminal, Download, LogOut, Loader2, Cpu } from 'lucide-react';
import { Button } from '@/components/ui/Button';
import { useAuthStore } from '@/lib/store';

export default function PortalPage() {
  const { isAuthenticated, user, licenses, login, logout, addLicense } = useAuthStore();
  
  // Auth Form State
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  
  // Dashboard State
  const [isGenerating, setIsGenerating] = useState(false);

  const handleLogin = (e: React.FormEvent) => {
    e.preventDefault();
    if (name && email) login(name, email);
  };

  const handlePurchase = (type: string) => {
    setIsGenerating(true);
    setTimeout(() => {
      addLicense(type);
      setIsGenerating(false);
    }, 2500); // Simulate cryptographic generation
  };

  return (
    <main className="min-h-screen bg-deep-black pt-28 pb-20 relative z-10 overflow-hidden">
      <div className="absolute top-1/4 left-1/2 -translate-x-1/2 w-[800px] h-[800px] bg-cyber-cyan/5 blur-[150px] pointer-events-none -z-10"></div>

      <div className="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
        
        {!isAuthenticated ? (
          // ================= LOGIN VIEW =================
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="max-w-md mx-auto mt-20">
            <div className="text-center mb-10">
              <ShieldCheck className="w-16 h-16 text-cyber-cyan mx-auto mb-4" />
              <h1 className="text-4xl font-orbitron text-ghost-white mb-2">SECURE <span className="text-glow-cyan">PORTAL</span></h1>
              <p className="font-mono text-sm text-ghost-white/50">AUTHORIZATION REQUIRED</p>
            </div>

            <form onSubmit={handleLogin} className="glass p-8 rounded-2xl border border-cyber-cyan/30 space-y-6">
              <div>
                <label className="font-mono text-xs text-cyber-cyan mb-2 block">OPERATOR ID (NAME)</label>
                <input 
                  type="text" required value={name} onChange={e => setName(e.target.value)}
                  className="w-full bg-deep-black border border-white/10 rounded px-4 py-3 font-rajdhani focus:border-cyber-cyan focus:outline-none"
                />
              </div>
              <div>
                <label className="font-mono text-xs text-cyber-cyan mb-2 block">CREDENTIAL (EMAIL)</label>
                <input 
                  type="email" required value={email} onChange={e => setEmail(e.target.value)}
                  className="w-full bg-deep-black border border-white/10 rounded px-4 py-3 font-rajdhani focus:border-cyber-cyan focus:outline-none"
                />
              </div>
              <Button variant="neon-cyan" className="w-full mt-4">AUTHENTICATE</Button>
            </form>
          </motion.div>
        ) : (
          // ================= DASHBOARD VIEW =================
          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="space-y-12">
            
            {/* Top Bar */}
            <div className="flex flex-col md:flex-row justify-between items-center glass p-6 rounded-2xl border border-neon-green/30">
              <div className="flex items-center gap-4 mb-4 md:mb-0">
                <div className="w-12 h-12 rounded-full bg-neon-green/20 flex items-center justify-center border border-neon-green">
                  <Terminal className="w-6 h-6 text-neon-green" />
                </div>
                <div>
                  <h2 className="font-orbitron text-xl text-ghost-white">Welcome, {user?.name}</h2>
                  <p className="font-mono text-xs text-neon-green">STATUS: ACTIVE COMM-LINK</p>
                </div>
              </div>
              <Button variant="glass" size="sm" onClick={logout} className="flex items-center gap-2 border-alert-red/50 text-alert-red hover:bg-alert-red hover:text-black">
                <LogOut className="w-4 h-4" /> Terminate Session
              </Button>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
              
              {/* License Store */}
              <div className="lg:col-span-1 space-y-6">
                <h3 className="font-orbitron text-2xl text-cyber-cyan border-b border-cyber-cyan/20 pb-4">Acquire Nodes</h3>
                
                <div className="glass p-6 rounded-xl border border-ghost-white/10 hover:border-cyber-cyan/50 transition-colors">
                  <div className="flex justify-between items-start mb-4">
                    <div>
                      <h4 className="font-orbitron text-ghost-white">Pro Grid License</h4>
                      <p className="font-mono text-xs text-ghost-white/50">Monthly Auto-Renew</p>
                    </div>
                    <span className="font-mono text-cyber-cyan">$129</span>
                  </div>
                  <Button variant="neon-cyan" className="w-full text-sm" onClick={() => handlePurchase('PRO GRID')} disabled={isGenerating}>
                    {isGenerating ? <span className="flex items-center justify-center gap-2"><Loader2 className="w-4 h-4 animate-spin" /> Generating...</span> : 'Authorize Payment'}
                  </Button>
                </div>

                <div className="glass p-6 rounded-xl border border-ghost-white/10 hover:border-neon-green/50 transition-colors">
                  <div className="flex justify-between items-start mb-4">
                    <div>
                      <h4 className="font-orbitron text-ghost-white">Lite Node License</h4>
                      <p className="font-mono text-xs text-ghost-white/50">Monthly Auto-Renew</p>
                    </div>
                    <span className="font-mono text-neon-green">$49</span>
                  </div>
                  <Button variant="neon-green" className="w-full text-sm" onClick={() => handlePurchase('LITE NODE')} disabled={isGenerating}>
                    Authorize Payment
                  </Button>
                </div>
              </div>

              {/* Active Keys Inventory */}
              <div className="lg:col-span-2 glass p-8 rounded-2xl border border-electric-purple/30">
                <h3 className="font-orbitron text-2xl text-electric-purple mb-6 flex items-center gap-3">
                  <Key className="w-6 h-6" /> Decrypted License Keys
                </h3>
                
                <div className="space-y-4">
                  {licenses.length === 0 ? (
                    <div className="text-center py-12 border border-dashed border-white/10 rounded-xl">
                      <Cpu className="w-12 h-12 text-ghost-white/20 mx-auto mb-3" />
                      <p className="font-mono text-ghost-white/40">NO ACTIVE LICENSES FOUND IN REGISTRY</p>
                    </div>
                  ) : (
                    <AnimatePresence>
                      {licenses.map((lic, i) => (
                        <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} className="bg-deep-black/60 border border-white/10 rounded-xl p-4 flex flex-col sm:flex-row justify-between items-center gap-4">
                          <div>
                            <span className="bg-electric-purple/20 text-electric-purple font-mono text-xs px-2 py-1 rounded mr-3">{lic.type}</span>
                            <span className="font-mono text-ghost-white/50 text-xs">Issued: {lic.date}</span>
                            <p className="font-mono text-lg text-neon-green mt-2 tracking-widest">{lic.key}</p>
                          </div>
                          <Button variant="glass" size="sm" className="shrink-0 flex gap-2 border-electric-purple/30 text-electric-purple hover:border-electric-purple">
                            <Download className="w-4 h-4" /> Download Installer
                          </Button>
                        </motion.div>
                      ))}
                    </AnimatePresence>
                  )}
                </div>
              </div>

            </div>
          </motion.div>
        )}
      </div>
    </main>
  );
}

================================================================================
FILE: app\pricing\page.tsx
================================================================================

'use client';

import React, { useState } from 'react';
import { motion } from 'framer-motion';
import { Check, Zap, Shield, Cpu, X, Server, ArrowRight } from 'lucide-react';
import { Button } from '@/components/ui/Button';
import { GlowingBorder } from '@/components/ui/GlowingBorder';
import { useRouter } from 'next/navigation';
import { useRobotStore } from '@/lib/store';

export default function PricingPage() {
  const router = useRouter();
  const { flyTo } = useRobotStore();
  const [annual, setAnnual] = useState(true);

  const handleAction = (path: string, x: number, y: number) => {
    flyTo(path, { x, y }, () => router.push(path));
  };

  const tiers = [
    {
      name: 'LITE NODE',
      color: 'neon-green',
      hex: '#39FF14',
      priceMonthly: 49,
      priceAnnual: 39,
      desc: 'Perfect for pop-ups, food trucks, and single-location retail.',
      features: [
        '1 Terminal License',
        'Standard Retail POS',
        'Cloud Inventory Sync',
        'Basic Analytics',
        'Email Support'
      ],
      missing: ['Kitchen Display System (KDS)', 'Multi-Location Management', 'Custom API Access'],
      buttonVariant: 'neon-green' as const
    },
    {
      name: 'PRO GRID',
      color: 'cyber-cyan',
      hex: '#00F0FF',
      priceMonthly: 129,
      priceAnnual: 99,
      desc: 'Advanced telemetry for high-volume restaurants and busy stores.',
      features: [
        'Up to 5 Terminal Licenses',
        'Advanced F&B & Retail POS',
        'Kitchen Display System (KDS)',
        'Table & Seat Management',
        'AI-Driven Inventory Restocking',
        '24/7 Priority Support'
      ],
      missing: ['Custom API Access'],
      buttonVariant: 'neon-cyan' as const,
      highlight: true
    },
    {
      name: 'ENTERPRISE MATRIX',
      color: 'electric-purple',
      hex: '#BF00FF',
      priceMonthly: 'CUSTOM',
      priceAnnual: 'CUSTOM',
      desc: 'Full ERP capabilities for multi-location franchises and massive operations.',
      features: [
        'Unlimited Terminal Licenses',
        'Full ERP Capabilities',
        'Multi-Warehouse Logistics',
        'Franchise Royalty Engine',
        'Dedicated Server Nodes',
        'Custom API & Integrations',
        'White-Glove Onboarding'
      ],
      missing: [],
      buttonVariant: 'neon-purple' as const
    }
  ];

  const faqs = [
    { q: 'Do I need to buy proprietary hardware?', a: 'No. Ghostwire is completely hardware-agnostic. It runs flawlessly on iPads, Android tablets, legacy Windows registers, and any modern web browser.' },
    { q: 'What happens if the internet goes down?', a: 'Ghostwire features Absolute Offline Resilience. Terminals continue to process cash and queued credit card transactions locally, auto-syncing to the cloud the moment the connection returns.' },
    { q: 'Are there hidden transaction fees?', a: 'Ghostwire integrates with your existing merchant processor (Stripe, Square, etc.). We do not take a percentage of your sales. You only pay your software subscription.' },
    { q: 'Can I switch from my current POS easily?', a: 'Yes. Our Pro and Enterprise tiers include automated data migration tools to pull your existing inventory, menus, and customer data from legacy systems.' },
  ];

  return (
    <main className="min-h-screen bg-deep-black pt-28 pb-20 relative z-10 overflow-hidden">
      
      {/* Background Decor */}
      <div className="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-cyber-cyan/10 blur-[120px] rounded-full pointer-events-none -z-10"></div>
      <div className="absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-electric-purple/10 blur-[120px] rounded-full pointer-events-none -z-10"></div>

      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        {/* Header */}
        <div className="text-center mb-16 relative z-10">
          <motion.h1 
            initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}
            className="text-5xl md:text-6xl font-orbitron text-ghost-white mb-6"
          >
            SYSTEM <span className="text-glow-cyan">LICENSING</span>
          </motion.h1>
          <motion.p 
            initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }}
            className="text-xl font-rajdhani text-ghost-white/70 max-w-2xl mx-auto mb-10"
          >
            Transparent pricing for the most advanced operational software on the grid. No hidden fees. No forced hardware.
          </motion.p>

          {/* Billing Toggle */}
          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.2 }} className="flex justify-center items-center gap-4 font-orbitron">
            <span className={`text-sm ${!annual ? 'text-cyber-cyan text-glow-cyan' : 'text-ghost-white/50'}`}>MONTHLY</span>
            <button 
              onClick={() => setAnnual(!annual)}
              className="w-16 h-8 glass rounded-full border border-cyber-cyan/30 relative flex items-center px-1 cursor-pointer transition-colors"
            >
              <div className={`w-6 h-6 rounded-full bg-cyber-cyan shadow-neon-cyan transition-transform duration-300 ${annual ? 'translate-x-8' : 'translate-x-0'}`}></div>
            </button>
            <span className={`text-sm ${annual ? 'text-cyber-cyan text-glow-cyan' : 'text-ghost-white/50'}`}>
              ANNUAL <span className="text-neon-green text-xs ml-1">(SAVE 20%)</span>
            </span>
          </motion.div>
        </div>

        {/* Pricing Cards */}
        <div className="grid grid-cols-1 md:grid-cols-3 gap-8 mb-32 relative z-10">
          {tiers.map((tier, idx) => {
            const isHighlighted = tier.highlight;
            const price = annual ? tier.priceAnnual : tier.priceMonthly;
            
            const CardWrapper = isHighlighted ? GlowingBorder : React.Fragment;
            const wrapperProps = isHighlighted ? { color: 'cyan' as const, className: 'h-full scale-105 z-20' } : {};

            return (
              <motion.div 
                key={tier.name}
                initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 * idx }}
                className={isHighlighted ? 'relative' : 'mt-0 md:mt-8'}
              >
                {/* @ts-ignore - Dynamic wrapper handling */}
                <CardWrapper {...wrapperProps}>
                  <div className={`glass p-8 rounded-2xl h-full flex flex-col border ${isHighlighted ? 'border-cyber-cyan/50 bg-deep-black' : 'border-ghost-white/10'}`}>
                    
                    {isHighlighted && (
                      <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-cyber-cyan text-deep-black px-4 py-1 rounded-full font-orbitron text-xs font-bold tracking-wider">
                        MOST DEPLOYED
                      </div>
                    )}

                    <h3 className={`text-2xl font-orbitron text-${tier.color} mb-2`}>{tier.name}</h3>
                    <p className="font-rajdhani text-ghost-white/60 mb-6 min-h-[48px]">{tier.desc}</p>
                    
                    <div className="mb-8 border-b border-white/10 pb-8">
                      {typeof price === 'number' ? (
                        <div className="flex items-baseline gap-1">
                          <span className="text-3xl font-mono text-ghost-white/50">$</span>
                          <span className="text-6xl font-orbitron font-bold text-ghost-white">{price}</span>
                          <span className="text-ghost-white/50 font-rajdhani">/mo</span>
                        </div>
                      ) : (
                        <div className="text-4xl font-orbitron font-bold text-ghost-white py-2">{price}</div>
                      )}
                    </div>

                    <div className="flex-grow space-y-4 mb-8">
                      {tier.features.map(feat => (
                        <div key={feat} className="flex items-start gap-3">
                          <Check className={`w-5 h-5 text-${tier.color} shrink-0 mt-0.5`} />
                          <span className="font-rajdhani text-ghost-white/90">{feat}</span>
                        </div>
                      ))}
                      {tier.missing.map(feat => (
                        <div key={feat} className="flex items-start gap-3 opacity-40">
                          <X className="w-5 h-5 text-ghost-white shrink-0 mt-0.5" />
                          <span className="font-rajdhani text-ghost-white line-through">{feat}</span>
                        </div>
                      ))}
                    </div>

                    <Button 
                      variant={tier.buttonVariant} 
                      className="w-full mt-auto"
                      onClick={() => handleAction('/contact', 0, 50)}
                    >
                      {tier.name === 'ENTERPRISE MATRIX' ? 'Contact Logistics' : 'Deploy Protocol'}
                    </Button>
                  </div>
                </CardWrapper>
              </motion.div>
            );
          })}
        </div>

        {/* Feature Grid Banner */}
        <motion.div 
          initial={{ opacity: 0, y: 30 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }}
          className="glass border border-electric-purple/30 rounded-2xl p-8 md:p-12 mb-32 flex flex-col md:flex-row items-center gap-12 relative overflow-hidden"
        >
          <div className="absolute inset-0 bg-electric-purple/5"></div>
          <div className="md:w-1/2 relative z-10">
            <h2 className="text-3xl md:text-4xl font-orbitron text-ghost-white mb-4">NEED DEDICATED <span className="text-electric-purple">HARDWARE?</span></h2>
            <p className="font-rajdhani text-lg text-ghost-white/70 mb-6">
              While Ghostwire runs on almost any device, we offer military-grade, pre-configured hardware bundles perfectly optimized for our ecosystem. Touch terminals, kitchen impact printers, and neural-fast barcode scanners.
            </p>
            <Button variant="neon-purple" className="flex gap-2 items-center" onClick={() => handleAction('/contact', -80, 50)}>
              View Hardware Bundles <ArrowRight className="w-4 h-4" />
            </Button>
          </div>
          <div className="md:w-1/2 relative z-10 grid grid-cols-2 gap-4">
            <div className="bg-deep-black/60 border border-white/5 p-4 rounded-xl flex flex-col items-center text-center hover:border-neon-green transition-colors">
              <Cpu className="w-8 h-8 text-neon-green mb-3" />
              <span className="font-orbitron text-sm">Mainframe Terminals</span>
            </div>
            <div className="bg-deep-black/60 border border-white/5 p-4 rounded-xl flex flex-col items-center text-center hover:border-cyber-cyan transition-colors">
              <Server className="w-8 h-8 text-cyber-cyan mb-3" />
              <span className="font-orbitron text-sm">Local Server Nodes</span>
            </div>
            <div className="bg-deep-black/60 border border-white/5 p-4 rounded-xl flex flex-col items-center text-center hover:border-electric-purple transition-colors">
              <Shield className="w-8 h-8 text-electric-purple mb-3" />
              <span className="font-orbitron text-sm">Encrypted Swipers</span>
            </div>
            <div className="bg-deep-black/60 border border-white/5 p-4 rounded-xl flex flex-col items-center text-center hover:border-neon-green transition-colors">
              <Zap className="w-8 h-8 text-neon-green mb-3" />
              <span className="font-orbitron text-sm">Thermal Printers</span>
            </div>
          </div>
        </motion.div>

        {/* FAQ Section */}
        <div className="max-w-4xl mx-auto relative z-10">
          <h2 className="text-4xl font-orbitron text-center text-ghost-white mb-12">DATA <span className="text-glow-cyan">ARCHIVE</span> (FAQ)</h2>
          <div className="space-y-6">
            {faqs.map((faq, idx) => (
              <motion.div 
                key={idx}
                initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} viewport={{ once: true }} transition={{ delay: idx * 0.1 }}
                className="glass border border-ghost-white/10 rounded-xl p-6 hover:border-cyber-cyan/50 transition-colors"
              >
                <h3 className="text-xl font-orbitron text-cyber-cyan mb-3 flex items-start gap-3">
                  <span className="text-ghost-white/30 font-mono text-sm mt-1">0{idx + 1}</span>
                  {faq.q}
                </h3>
                <p className="font-rajdhani text-ghost-white/70 pl-8 leading-relaxed">
                  {faq.a}
                </p>
              </motion.div>
            ))}
          </div>
        </div>

      </div>
    </main>
  );
}

================================================================================
FILE: app\products\page.tsx
================================================================================

'use client';

import React from 'react';
import { motion } from 'framer-motion';
import { Store, Utensils, Factory, LineChart, ChevronRight } from 'lucide-react';
import { Button } from '@/components/ui/Button';

export default function ProductsPage() {
  return (
    <main className="min-h-screen bg-deep-black pt-28 pb-20">
      
      {/* Header */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center mb-24">
        <motion.h1 
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          className="text-5xl md:text-6xl font-orbitron text-ghost-white mb-6"
        >
          THE <span className="text-glow-cyan">GHOSTWIRE</span> SUITE
        </motion.h1>
        <motion.p 
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.1 }}
          className="text-xl font-rajdhani text-ghost-white/70 max-w-3xl mx-auto"
        >
          A fully integrated ecosystem of Point of Sale and Enterprise Resource Planning modules, 
          designed to scale from a single pop-up shop to a global franchise grid.
        </motion.p>
      </div>

      {/* Product Sections */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-32">
        
        {/* RETAIL POS */}
        <div className="flex flex-col lg:flex-row items-center gap-12">
          <motion.div initial={{ opacity: 0, x: -50 }} whileInView={{ opacity: 1, x: 0 }} viewport={{ once: true }} className="w-full lg:w-1/2">
            <div className="p-4 rounded-xl bg-neon-green/10 text-neon-green w-16 h-16 flex items-center justify-center mb-6">
              <Store className="w-8 h-8" />
            </div>
            <h2 className="text-4xl font-orbitron text-ghost-white mb-4">Retail <span className="text-neon-green">POS</span></h2>
            <p className="font-rajdhani text-lg text-ghost-white/70 mb-6 leading-relaxed">
              Designed for high-traffic environments. Scan barcodes in milliseconds, manage complex product variations (size/color matrix), and seamlessly process returns or exchanges.
            </p>
            <ul className="space-y-3 mb-8">
              <li className="flex items-center text-ghost-white/80 font-rajdhani"><ChevronRight className="w-5 h-5 text-neon-green mr-2" /> Unlimited SKU Management</li>
              <li className="flex items-center text-ghost-white/80 font-rajdhani"><ChevronRight className="w-5 h-5 text-neon-green mr-2" /> Custom Label & Barcode Printing</li>
              <li className="flex items-center text-ghost-white/80 font-rajdhani"><ChevronRight className="w-5 h-5 text-neon-green mr-2" /> Built-in Customer Loyalty Engine</li>
            </ul>
            <Button variant="neon-green">Explore Retail</Button>
          </motion.div>
          <motion.div initial={{ opacity: 0, x: 50 }} whileInView={{ opacity: 1, x: 0 }} viewport={{ once: true }} className="w-full lg:w-1/2 h-80 glass rounded-2xl border border-neon-green/30 flex items-center justify-center bg-[url('https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?auto=format&fit=crop&q=80')] bg-cover bg-center overflow-hidden relative">
             <div className="absolute inset-0 bg-deep-black/60 backdrop-blur-sm"></div>
             {/* Abstract UI representation */}
             <div className="relative z-10 w-3/4 h-3/4 border border-neon-green/40 rounded bg-deep-black/80 p-4 shadow-neon-green flex flex-col">
                <div className="w-full h-8 border-b border-neon-green/30 mb-4 flex gap-2"><div className="w-20 h-full bg-neon-green/20"></div></div>
                <div className="flex-grow grid grid-cols-3 gap-2"><div className="col-span-2 bg-ghost-white/5 rounded"></div><div className="bg-neon-green/10 rounded"></div></div>
             </div>
          </motion.div>
        </div>

        {/* RESTAURANT & KDS */}
        <div className="flex flex-col lg:flex-row-reverse items-center gap-12">
          <motion.div initial={{ opacity: 0, x: 50 }} whileInView={{ opacity: 1, x: 0 }} viewport={{ once: true }} className="w-full lg:w-1/2">
            <div className="p-4 rounded-xl bg-cyber-cyan/10 text-cyber-cyan w-16 h-16 flex items-center justify-center mb-6">
              <Utensils className="w-8 h-8" />
            </div>
            <h2 className="text-4xl font-orbitron text-ghost-white mb-4">Hospitality <span className="text-cyber-cyan">KDS</span></h2>
            <p className="font-rajdhani text-lg text-ghost-white/70 mb-6 leading-relaxed">
              Ditch the paper tickets. Ghostwire instantly routes orders from the front-of-house directly to the correct prep stations via our interactive Kitchen Display System.
            </p>
            <ul className="space-y-3 mb-8">
              <li className="flex items-center text-ghost-white/80 font-rajdhani"><ChevronRight className="w-5 h-5 text-cyber-cyan mr-2" /> Drag-and-Drop Floor Plans</li>
              <li className="flex items-center text-ghost-white/80 font-rajdhani"><ChevronRight className="w-5 h-5 text-cyber-cyan mr-2" /> Split Checks & Seat Tracking</li>
              <li className="flex items-center text-ghost-white/80 font-rajdhani"><ChevronRight className="w-5 h-5 text-cyber-cyan mr-2" /> 3rd-Party Delivery Integrations</li>
            </ul>
            <Button variant="neon-cyan">Explore Hospitality</Button>
          </motion.div>
          <motion.div initial={{ opacity: 0, x: -50 }} whileInView={{ opacity: 1, x: 0 }} viewport={{ once: true }} className="w-full lg:w-1/2 h-80 glass rounded-2xl border border-cyber-cyan/30 flex items-center justify-center relative overflow-hidden">
             {/* Abstract KDS UI representation */}
             <div className="absolute inset-0 bg-cyber-cyan/5"></div>
             <div className="relative z-10 w-full h-full p-6 grid grid-cols-3 gap-4">
                <div className="bg-deep-black/80 border border-cyber-cyan/40 rounded p-3 flex flex-col"><div className="h-4 w-1/2 bg-cyber-cyan mb-2"></div><div className="h-2 w-full bg-ghost-white/20 mb-1"></div><div className="h-2 w-3/4 bg-ghost-white/20 mb-4"></div><div className="mt-auto h-8 w-full bg-cyber-cyan/20 rounded"></div></div>
                <div className="bg-deep-black/80 border border-cyber-cyan/40 rounded p-3 flex flex-col"><div className="h-4 w-1/2 bg-cyber-cyan mb-2"></div><div className="h-2 w-full bg-ghost-white/20 mb-1"></div><div className="h-2 w-3/4 bg-ghost-white/20 mb-4"></div><div className="mt-auto h-8 w-full bg-cyber-cyan/20 rounded"></div></div>
                <div className="bg-deep-black/80 border border-neon-green/40 rounded p-3 flex flex-col opacity-50"><div className="h-4 w-1/2 bg-neon-green mb-2"></div><div className="h-2 w-full bg-ghost-white/20 mb-1"></div></div>
             </div>
          </motion.div>
        </div>

        {/* ENTERPRISE ERP */}
        <div className="flex flex-col lg:flex-row items-center gap-12">
          <motion.div initial={{ opacity: 0, x: -50 }} whileInView={{ opacity: 1, x: 0 }} viewport={{ once: true }} className="w-full lg:w-1/2">
            <div className="p-4 rounded-xl bg-electric-purple/10 text-electric-purple w-16 h-16 flex items-center justify-center mb-6">
              <Factory className="w-8 h-8" />
            </div>
            <h2 className="text-4xl font-orbitron text-ghost-white mb-4">Enterprise <span className="text-electric-purple">ERP</span></h2>
            <p className="font-rajdhani text-lg text-ghost-white/70 mb-6 leading-relaxed">
              For operations that require more than just ringing up sales. Manage vendors, track raw ingredients, calculate labor costs, and monitor multi-warehouse logistics.
            </p>
            <ul className="space-y-3 mb-8">
              <li className="flex items-center text-ghost-white/80 font-rajdhani"><ChevronRight className="w-5 h-5 text-electric-purple mr-2" /> Automated Purchase Orders</li>
              <li className="flex items-center text-ghost-white/80 font-rajdhani"><ChevronRight className="w-5 h-5 text-electric-purple mr-2" /> Employee Time & Attendance</li>
              <li className="flex items-center text-ghost-white/80 font-rajdhani"><ChevronRight className="w-5 h-5 text-electric-purple mr-2" /> Franchise Royalty Calculations</li>
            </ul>
            <Button variant="neon-purple">Explore Enterprise</Button>
          </motion.div>
          <motion.div initial={{ opacity: 0, x: 50 }} whileInView={{ opacity: 1, x: 0 }} viewport={{ once: true }} className="w-full lg:w-1/2 h-80 glass rounded-2xl border border-electric-purple/30 flex items-center justify-center relative overflow-hidden">
             <div className="absolute inset-0 bg-electric-purple/5"></div>
             <LineChart className="w-32 h-32 text-electric-purple/40" />
          </motion.div>
        </div>

      </div>
    </main>
  );
}

================================================================================
FILE: components\3d\HardwareScene.tsx
================================================================================

'use client';

import React from 'react';
import { Canvas } from '@react-three/fiber';
import { Float, PresentationControls, RoundedBox, Cylinder, Box } from '@react-three/drei';

export function HardwareScene() {
  return (
    <Canvas camera={{ position: [0, 0, 6], fov: 45 }} gl={{ alpha: true, antialias: true }}>
      <ambientLight intensity={0.8} />
      <directionalLight position={[10, 10, 10]} intensity={2} color="#00F0FF" />
      <directionalLight position={[-10, -10, -10]} intensity={1} color="#BF00FF" />
      <directionalLight position={[0, 10, -10]} intensity={1.5} color="#39FF14" />

      {/* Lusion-style smooth drag and spring physics */}
      <PresentationControls 
        global 
        config={{ mass: 2, tension: 400, friction: 26 }} 
        snap={{ mass: 4, tension: 800, friction: 30 }} 
        rotation={[0.2, -0.4, 0]} 
        polar={[-Math.PI / 3, Math.PI / 3]} 
        azimuth={[-Math.PI / 2, Math.PI / 2]}
      >
        {/* Everything floats organically */}
        <Float rotationIntensity={1.5} floatIntensity={2} speed={2}>
          
          {/* Main POS Terminal Base */}
          <RoundedBox args={[2.5, 0.4, 2]} position={[0, -1, 0]} radius={0.1} smoothness={4}>
             <meshStandardMaterial color="#1A1A1A" roughness={0.2} metalness={0.8} />
          </RoundedBox>

          {/* Glowing Terminal Screen (Detached and floating) */}
          <Float rotationIntensity={0.5} floatIntensity={1} speed={3}>
            <RoundedBox args={[2.2, 1.4, 0.1]} position={[0, 0.6, 0.5]} rotation={[-0.2, 0, 0]} radius={0.05}>
               <meshStandardMaterial color="#0A0A0A" roughness={0.1} metalness={0.9} />
            </RoundedBox>
            {/* Screen Glow */}
            <mesh position={[0, 0.6, 0.56]} rotation={[-0.2, 0, 0]}>
              <planeGeometry args={[2.0, 1.2]} />
              <meshBasicMaterial color="#00F0FF" transparent opacity={0.2} />
            </mesh>
          </Float>

          {/* Floating Barcode Scanner */}
          <Float rotationIntensity={2} floatIntensity={3} speed={4}>
            <group position={[2, 0.5, 0.5]} rotation={[0.5, -0.5, 0.2]}>
              <Cylinder args={[0.15, 0.15, 1]} position={[0, -0.2, 0]}>
                <meshStandardMaterial color="#2A2D34" roughness={0.4} />
              </Cylinder>
              <Box args={[0.4, 0.3, 0.6]} position={[0, 0.4, 0.2]}>
                <meshStandardMaterial color="#1A1A1A" />
              </Box>
              {/* Scanner Laser */}
              <mesh position={[0, 0.4, 0.51]}>
                <planeGeometry args={[0.3, 0.1]} />
                <meshBasicMaterial color="#FF003C" />
              </mesh>
            </group>
          </Float>

          {/* Floating Receipt Paper Roll */}
          <Float rotationIntensity={1} floatIntensity={1.5} speed={2.5}>
            <Cylinder args={[0.4, 0.4, 0.8]} position={[-1.8, 0, -0.5]} rotation={[Math.PI / 2, Math.PI / 4, 0]}>
               <meshStandardMaterial color="#F0F0F0" roughness={0.9} />
            </Cylinder>
            <Cylinder args={[0.1, 0.1, 0.82]} position={[-1.8, 0, -0.5]} rotation={[Math.PI / 2, Math.PI / 4, 0]}>
               <meshStandardMaterial color="#0A0A0A" />
            </Cylinder>
          </Float>

          {/* Lusion abstract connecting data particles */}
          <mesh position={[1, -0.2, -1]}><sphereGeometry args={[0.1]} /><meshBasicMaterial color="#39FF14" /></mesh>
          <mesh position={[-1, 1.5, -0.5]}><sphereGeometry args={[0.08]} /><meshBasicMaterial color="#BF00FF" /></mesh>
          <mesh position={[0, 1.8, 1]}><sphereGeometry args={[0.05]} /><meshBasicMaterial color="#00F0FF" /></mesh>

        </Float>
      </PresentationControls>
    </Canvas>
  );
}

================================================================================
FILE: components\3d\HeroScene.tsx
================================================================================

'use client';

import React, { useRef, useState } from 'react';
import { Canvas, useFrame } from '@react-three/fiber';
import { PresentationControls, Float, MeshPortalMaterial, RoundedBox, Stars, Sparkles, MeshTransmissionMaterial, Text } from '@react-three/drei';
import * as THREE from 'three';

// 1. The controllable astronaut/robot inside the portal
function PortalExplorerBot() {
  const botRef = useRef<THREE.Group>(null);
  
  useFrame((state, delta) => {
    if (!botRef.current) return;
    
    // Smoothly follow the mouse inside the 3D portal
    const targetX = (state.pointer.x * 3);
    const targetY = (state.pointer.y * 2);
    
    // Physics-like damping for buttery smooth movement
    botRef.current.position.x = THREE.MathUtils.damp(botRef.current.position.x, targetX, 4, delta);
    botRef.current.position.y = THREE.MathUtils.damp(botRef.current.position.y, targetY, 4, delta);
    
    // Bank/tilt into turns based on mouse position
    botRef.current.rotation.y = THREE.MathUtils.damp(botRef.current.rotation.y, (state.pointer.x * Math.PI) / 4, 4, delta);
    botRef.current.rotation.x = THREE.MathUtils.damp(botRef.current.rotation.x, -(state.pointer.y * Math.PI) / 4, 4, delta);
    botRef.current.rotation.z = THREE.MathUtils.damp(botRef.current.rotation.z, -state.pointer.x * 0.5, 4, delta);
  });

  return (
    <group ref={botRef} scale={0.6}>
      {/* Bot Body */}
      <mesh position={[0, 0, 0]}><capsuleGeometry args={[0.4, 0.6, 16, 16]} /><meshStandardMaterial color="#E0E5EC" roughness={0.2} metalness={0.8} /></mesh>
      {/* Glowing Visor */}
      <mesh position={[0, 0.2, 0.35]}><boxGeometry args={[0.5, 0.2, 0.2]} /><meshBasicMaterial color="#00F0FF" /></mesh>
      {/* Jetpack */}
      <mesh position={[0, 0, -0.4]}><boxGeometry args={[0.4, 0.6, 0.2]} /><meshStandardMaterial color="#2A2D34" /></mesh>
      {/* Jetpack Flames */}
      <mesh position={[-0.15, -0.4, -0.4]}><coneGeometry args={[0.1, 0.4, 16]} /><meshBasicMaterial color="#39FF14" transparent opacity={0.8} blending={THREE.AdditiveBlending} /></mesh>
      <mesh position={[0.15, -0.4, -0.4]}><coneGeometry args={[0.1, 0.4, 16]} /><meshBasicMaterial color="#39FF14" transparent opacity={0.8} blending={THREE.AdditiveBlending} /></mesh>
    </group>
  );
}

// 2. Floating Abstract Data Nodes (Like the Lusion Connector Blocks)
function AbstractDataNode({ position, color }: { position: [number, number, number], color: string }) {
  const ref = useRef<THREE.Group>(null);
  useFrame((_, delta) => {
    if (ref.current) {
      ref.current.rotation.x += delta * 0.2;
      ref.current.rotation.y += delta * 0.3;
    }
  });

  return (
    <group ref={ref} position={position} scale={0.5}>
      <mesh><boxGeometry args={[1, 0.3, 0.3]} /><meshStandardMaterial color={color} roughness={0.1} metalness={0.8} /></mesh>
      <mesh><boxGeometry args={[0.3, 1, 0.3]} /><meshStandardMaterial color={color} roughness={0.1} metalness={0.8} /></mesh>
      <mesh><boxGeometry args={[0.3, 0.3, 1]} /><meshStandardMaterial color={color} roughness={0.1} metalness={0.8} /></mesh>
    </group>
  );
}

// 3. The Main Interactive Tablet Element
function InteractiveTablet() {
  const [hovered, setHovered] = useState(false);

  return (
    <group onPointerOver={() => setHovered(true)} onPointerOut={() => setHovered(false)}>
      {/* Tablet Bezel */}
      <RoundedBox args={[4.2, 2.8, 0.1]} radius={0.15} smoothness={4}>
        <meshStandardMaterial color="#0A0A0A" roughness={0.1} metalness={0.9} />
      </RoundedBox>
      
      {/* Tablet Screen with Portal to Another Dimension */}
      <mesh position={[0, 0, 0.051]}>
        <planeGeometry args={[4.0, 2.6]} />
        <MeshPortalMaterial blend={hovered ? 0.05 : 0}>
          {/* Deep Space Background Inside Portal */}
          <color attach="background" args={['#020202']} />
          <Stars radius={50} depth={50} count={2000} factor={4} saturation={1} fade speed={1} />
          <Sparkles count={50} scale={10} size={2} color="#BF00FF" speed={0.4} />
          
          {/* Floating POS Neon Signs inside the portal */}
          <Text position={[-1.5, 1, -2]} fontSize={0.3} color="#39FF14" font="/fonts/Orbitron.ttf">TX_APPROVED</Text>
          <Text position={[1.5, -1, -3]} fontSize={0.2} color="#00F0FF" font="/fonts/Orbitron.ttf">SYNCING_NODES...</Text>

          {/* The Player Controlled Bot */}
          <PortalExplorerBot />
          
          <ambientLight intensity={1.5} />
          <directionalLight position={[5, 5, 5]} intensity={2} />
        </MeshPortalMaterial>
      </mesh>
    </group>
  );
}

export function HeroScene() {
  return (
    <Canvas camera={{ position: [0, 0, 6], fov: 45 }} gl={{ antialias: true, alpha: true }}>
      <ambientLight intensity={1} />
      <directionalLight position={[10, 10, 10]} intensity={2} color="#00F0FF" />
      <directionalLight position={[-10, -10, -10]} intensity={1} color="#BF00FF" />

      {/* PresentationControls gives the buttery smooth drag-to-rotate interaction */}
      <PresentationControls
        global
        config={{ mass: 2, tension: 400, friction: 26 }}
        snap={{ mass: 4, tension: 1000, friction: 40 }} // Snaps back to center on release
        rotation={[0, 0.1, 0]}
        polar={[-Math.PI / 4, Math.PI / 4]} // Vertical rotation limits
        azimuth={[-Math.PI / 3, Math.PI / 3]} // Horizontal rotation limits
      >
        <Float rotationIntensity={0.5} floatIntensity={1.5} speed={2}>
          
          {/* Outer floating shapes (Lusion style glass/neon nodes) */}
          <AbstractDataNode position={[-3, 1.5, -1]} color="#39FF14" />
          <AbstractDataNode position={[3, -1.5, 0]} color="#00F0FF" />
          <AbstractDataNode position={[-2.5, -2, -2]} color="#BF00FF" />
          
          {/* Glassy 3D Credit Card floating in the foreground */}
          <Float rotationIntensity={1} floatIntensity={2} speed={3}>
            <RoundedBox args={[1.6, 1.0, 0.05]} radius={0.05} position={[2.5, 1.2, 1.5]} rotation={[0.2, -0.4, 0.1]}>
               <MeshTransmissionMaterial thickness={0.5} roughness={0.1} transmission={1} ior={1.5} color="#BF00FF" />
            </RoundedBox>
          </Float>

          {/* The Main Controllable Screen */}
          <InteractiveTablet />
          
        </Float>
      </PresentationControls>
    </Canvas>
  );
}

================================================================================
FILE: components\3d\Robot.tsx
================================================================================

'use client';

import React, { useRef, useState, useMemo, useEffect } from 'react';
import { useFrame, useThree } from '@react-three/fiber';
import { Html, Trail, Sphere, Cylinder, Capsule, Box } from '@react-three/drei';
import * as THREE from 'three';
import { useRobotStore } from '@/lib/store';

// --- HIGHLY DETAILED & ANIMATED POS ASSISTANT BOT ---
function ChubbyBot({ actionState }: { actionState: string }) {
  const wrapperRef = useRef<THREE.Group>(null);
  const headRef = useRef<THREE.Group>(null);
  const rightArmRef = useRef<THREE.Group>(null);
  const leftArmRef = useRef<THREE.Group>(null);
  const bodyRef = useRef<THREE.Group>(null);
  const jetpackFlameRef = useRef<THREE.Mesh>(null);
  const scannerBeamRef = useRef<THREE.Mesh>(null);

  const materials = useMemo(() => ({
    body: new THREE.MeshStandardMaterial({ color: '#E0E5EC', roughness: 0.2, metalness: 0.2 }),
    darkMetal: new THREE.MeshStandardMaterial({ color: '#2A2D34', roughness: 0.6, metalness: 0.8 }),
    redArmor: new THREE.MeshStandardMaterial({ color: '#FF003C', roughness: 0.3, metalness: 0.6, clearcoat: 1.0 }),
    blueArmor: new THREE.MeshStandardMaterial({ color: '#00F0FF', roughness: 0.3, metalness: 0.6, clearcoat: 1.0 }),
    yellowArmor: new THREE.MeshStandardMaterial({ color: '#FFD700', roughness: 0.3, metalness: 0.6, clearcoat: 1.0 }),
    eye: new THREE.MeshBasicMaterial({ color: '#0A0A0A' }),
    glowVisor: new THREE.MeshBasicMaterial({ color: '#00F0FF', transparent: true, opacity: 0.8 }),
    scannerLaser: new THREE.MeshBasicMaterial({ color: '#39FF14', transparent: true, opacity: 0.6, blending: THREE.AdditiveBlending }),
  }), []);

  useFrame((state) => {
    const time = state.clock.elapsedTime;
    
    if (wrapperRef.current && actionState !== 'spinning') {
      wrapperRef.current.rotation.y = THREE.MathUtils.lerp(wrapperRef.current.rotation.y, 0, 0.1);
    }

    if (actionState === 'crashing') {
      if (headRef.current) headRef.current.rotation.y += 0.4;
      if (rightArmRef.current) rightArmRef.current.rotation.z = Math.sin(time * 20) * 0.5 + 2; 
      if (leftArmRef.current) leftArmRef.current.rotation.z = -Math.sin(time * 20) * 0.5 - 2;
      if (jetpackFlameRef.current) jetpackFlameRef.current.scale.set(0, 0, 0); 
      if (scannerBeamRef.current) scannerBeamRef.current.scale.set(0, 0, 0);
    } 
    else if (actionState === 'escaping' || actionState === 'dodging') {
      if (rightArmRef.current) {
        rightArmRef.current.rotation.z = THREE.MathUtils.lerp(rightArmRef.current.rotation.z, 2.5 + Math.sin(time * 30) * 0.2, 0.2); 
        rightArmRef.current.rotation.x = Math.sin(time * 20) * 0.2;
      }
      if (leftArmRef.current) {
        leftArmRef.current.rotation.z = THREE.MathUtils.lerp(leftArmRef.current.rotation.z, -2.5 - Math.sin(time * 30) * 0.2, 0.2);
        leftArmRef.current.rotation.x = -Math.sin(time * 20) * 0.2;
      }
      if (headRef.current) headRef.current.rotation.y = THREE.MathUtils.lerp(headRef.current.rotation.y, 0, 0.2);
      if (jetpackFlameRef.current) jetpackFlameRef.current.scale.set(1.5, 2 + Math.sin(time * 30), 1.5); 
      if (scannerBeamRef.current) scannerBeamRef.current.scale.set(0, 0, 0);
    } 
    else if (actionState === 'climbing') {
      if (rightArmRef.current) rightArmRef.current.rotation.z = Math.sin(time * 2) * 0.2 + 0.5;
      if (leftArmRef.current) leftArmRef.current.rotation.z = -Math.sin(time * 2) * 0.2 - 0.5;
      if (jetpackFlameRef.current) jetpackFlameRef.current.scale.set(0.5, 0.5 + Math.sin(time * 10) * 0.2, 0.5); 
      if (scannerBeamRef.current) scannerBeamRef.current.scale.set(0, 0, 0);
    } 
    else if (actionState === 'waving') {
      if (rightArmRef.current) {
        rightArmRef.current.rotation.z = THREE.MathUtils.lerp(rightArmRef.current.rotation.z, 2.8 + Math.sin(time * 15) * 0.6, 0.2);
        rightArmRef.current.rotation.x = 0;
      }
      if (leftArmRef.current) leftArmRef.current.rotation.z = THREE.MathUtils.lerp(leftArmRef.current.rotation.z, -0.2, 0.1);
      if (headRef.current) headRef.current.rotation.y = THREE.MathUtils.lerp(headRef.current.rotation.y, Math.sin(time * 2) * 0.2, 0.1);
      if (jetpackFlameRef.current) jetpackFlameRef.current.scale.set(1, 1 + Math.sin(time * 5) * 0.2, 1);
      if (scannerBeamRef.current) scannerBeamRef.current.scale.set(0, 0, 0);
    } 
    else if (actionState === 'scanning') {
      if (rightArmRef.current) rightArmRef.current.rotation.z = THREE.MathUtils.lerp(rightArmRef.current.rotation.z, 0.2, 0.1);
      if (leftArmRef.current) {
        leftArmRef.current.rotation.z = THREE.MathUtils.lerp(leftArmRef.current.rotation.z, -1.0, 0.1);
        leftArmRef.current.rotation.x = THREE.MathUtils.lerp(leftArmRef.current.rotation.x, -0.5 + Math.sin(time * 3) * 0.5, 0.1); 
      }
      if (headRef.current) headRef.current.rotation.y = THREE.MathUtils.lerp(headRef.current.rotation.y, Math.sin(time * 3) * 0.3, 0.1); 
      if (scannerBeamRef.current) {
        scannerBeamRef.current.scale.set(1, 1, 1 + Math.sin(time * 15) * 0.2); 
      }
    } 
    else if (actionState === 'spinning') {
      if (wrapperRef.current) wrapperRef.current.rotation.y += 0.15;
      if (rightArmRef.current) rightArmRef.current.rotation.z = THREE.MathUtils.lerp(rightArmRef.current.rotation.z, 1.5, 0.2);
      if (leftArmRef.current) leftArmRef.current.rotation.z = THREE.MathUtils.lerp(leftArmRef.current.rotation.z, -1.5, 0.2);
      if (scannerBeamRef.current) scannerBeamRef.current.scale.set(0, 0, 0);
    } 
    else if (actionState === 'sleeping') {
      if (headRef.current) {
        headRef.current.rotation.x = THREE.MathUtils.lerp(headRef.current.rotation.x, 0.3, 0.1); 
        headRef.current.rotation.y = THREE.MathUtils.lerp(headRef.current.rotation.y, 0, 0.1);
      }
      if (rightArmRef.current) rightArmRef.current.rotation.z = THREE.MathUtils.lerp(rightArmRef.current.rotation.z, 0.1, 0.1);
      if (leftArmRef.current) leftArmRef.current.rotation.z = THREE.MathUtils.lerp(leftArmRef.current.rotation.z, -0.1, 0.1);
      if (jetpackFlameRef.current) jetpackFlameRef.current.scale.set(0.3, 0.3 + Math.sin(time * 2) * 0.1, 0.3); 
      if (scannerBeamRef.current) scannerBeamRef.current.scale.set(0, 0, 0);
      materials.glowVisor.opacity = 0.2; 
    } 
    else {
      materials.glowVisor.opacity = 0.8;
      if (headRef.current) headRef.current.rotation.x = THREE.MathUtils.lerp(headRef.current.rotation.x, 0, 0.1);
      if (rightArmRef.current) {
        rightArmRef.current.rotation.z = THREE.MathUtils.lerp(rightArmRef.current.rotation.z, 0.2 + Math.sin(time * 2) * 0.05, 0.1);
        rightArmRef.current.rotation.x = THREE.MathUtils.lerp(rightArmRef.current.rotation.x, -0.1, 0.1);
      }
      if (leftArmRef.current) {
        leftArmRef.current.rotation.z = THREE.MathUtils.lerp(leftArmRef.current.rotation.z, -0.2 - Math.sin(time * 2) * 0.05, 0.1);
        leftArmRef.current.rotation.x = THREE.MathUtils.lerp(leftArmRef.current.rotation.x, -0.1, 0.1);
      }
      if (headRef.current) headRef.current.rotation.y = THREE.MathUtils.lerp(headRef.current.rotation.y, Math.sin(time * 1.5) * 0.2, 0.05); 
      if (bodyRef.current) bodyRef.current.position.y = Math.sin(time * 3) * 0.05; 
      if (jetpackFlameRef.current) jetpackFlameRef.current.scale.set(1, 1 + Math.sin(time * 10) * 0.2, 1); 
      if (scannerBeamRef.current) scannerBeamRef.current.scale.set(0, 0, 0);
    }
  });

  return (
    <group ref={wrapperRef} scale={0.7} position={[0, -0.2, 0]}>
      {/* BODY */}
      <group ref={bodyRef}>
        <Capsule args={[0.5, 0.6, 32, 32]} material={materials.body} />
        <mesh position={[0, 0.1, 0.42]} material={materials.redArmor}><boxGeometry args={[0.55, 0.45, 0.2]} /></mesh>
        <mesh position={[0, 0.1, 0.53]} material={materials.darkMetal}><boxGeometry args={[0.2, 0.2, 0.02]} /></mesh>
        <mesh position={[0, -0.25, 0.48]} material={materials.glowVisor}><capsuleGeometry args={[0.08, 0.1, 8, 16]} /></mesh>
      </group>

      {/* HEAD */}
      <group ref={headRef} position={[0, 0.95, 0]}>
        <Cylinder args={[0.15, 0.2, 0.2]} position={[0, -0.2, 0]} material={materials.darkMetal} />
        <mesh rotation={[0, 0, Math.PI / 2]}>
          <capsuleGeometry args={[0.28, 0.35, 32, 32]} />
          <primitive object={materials.body} attach="material" />
        </mesh>
        <mesh position={[0, 0.05, 0.26]} material={materials.darkMetal}><boxGeometry args={[0.6, 0.2, 0.1]} /></mesh>
        
        <group position={[0, 0.05, 0.32]}>
          {actionState === 'crashing' ? (
            <group>
              <mesh position={[-0.15, 0, 0]} rotation={[0, 0, Math.PI/4]} material={materials.redArmor}><boxGeometry args={[0.1, 0.02, 0.01]}/></mesh>
              <mesh position={[-0.15, 0, 0]} rotation={[0, 0, -Math.PI/4]} material={materials.redArmor}><boxGeometry args={[0.1, 0.02, 0.01]}/></mesh>
              <mesh position={[0.15, 0, 0]} rotation={[0, 0, Math.PI/4]} material={materials.redArmor}><boxGeometry args={[0.1, 0.02, 0.01]}/></mesh>
              <mesh position={[0.15, 0, 0]} rotation={[0, 0, -Math.PI/4]} material={materials.redArmor}><boxGeometry args={[0.1, 0.02, 0.01]}/></mesh>
            </group>
          ) : actionState === 'sleeping' ? (
            <group>
               <mesh position={[-0.15, 0, 0]} material={materials.glowVisor}><boxGeometry args={[0.08, 0.01, 0.01]}/></mesh>
               <mesh position={[0.15, 0, 0]} material={materials.glowVisor}><boxGeometry args={[0.08, 0.01, 0.01]}/></mesh>
            </group>
          ) : (
            <group>
              <Sphere args={[0.03]} position={[-0.15, 0, 0]} material={materials.glowVisor} />
              <Sphere args={[0.03]} position={[0.15, 0, 0]} material={materials.glowVisor} />
              <Cylinder args={[0.005, 0.005, 0.3]} rotation={[0, 0, Math.PI / 2]} material={materials.glowVisor} />
            </group>
          )}
        </group>
      </group>

      {/* RIGHT ARM */}
      <group position={[0.65, 0.4, 0]} ref={rightArmRef}>
        <Sphere args={[0.18]} material={materials.blueArmor} />
        <Cylinder args={[0.16, 0.16, 0.1]} rotation={[0, 0, Math.PI/2]} material={materials.darkMetal} />
        <group position={[0, -0.35, 0]}>
          <Capsule args={[0.12, 0.4]} material={materials.body} />
          <Sphere args={[0.13]} position={[0, -0.28, 0]} material={materials.yellowArmor} />
          <Cylinder args={[0.03, 0.03, 0.1]} position={[-0.08, -0.38, 0]} rotation={[0, 0, 0.2]} material={materials.darkMetal} />
          <Cylinder args={[0.03, 0.03, 0.1]} position={[0.08, -0.38, 0]} rotation={[0, 0, -0.2]} material={materials.darkMetal} />
        </group>
      </group>

      {/* LEFT ARM */}
      <group position={[-0.65, 0.4, 0]} ref={leftArmRef}>
        <Sphere args={[0.18]} material={materials.blueArmor} />
        <Cylinder args={[0.16, 0.16, 0.1]} rotation={[0, 0, Math.PI/2]} material={materials.darkMetal} />
        <group position={[0, -0.35, 0]}>
          <Capsule args={[0.12, 0.4]} material={materials.body} />
          <Box args={[0.18, 0.2, 0.18]} position={[0, -0.25, 0]} material={materials.darkMetal} />
          <mesh position={[0, -0.35, 0.0]} rotation={[Math.PI/2, 0, 0]} material={materials.scannerLaser}>
            <circleGeometry args={[0.08, 16]} />
          </mesh>
          <mesh ref={scannerBeamRef} position={[0, -1.5, 0.0]} rotation={[0, 0, 0]}>
            <coneGeometry args={[0.5, 2.5, 16]} />
            <primitive object={materials.scannerLaser} attach="material" />
          </mesh>
        </group>
      </group>

      {/* LEGS */}
      <group position={[0.25, -0.8, 0]}>
        <Capsule args={[0.15, 0.3]} material={materials.body} />
        <mesh position={[0, -0.2, 0.1]} material={materials.yellowArmor}><boxGeometry args={[0.3, 0.18, 0.4]} /></mesh>
        <mesh position={[0, -0.1, 0.31]} material={materials.darkMetal}><boxGeometry args={[0.1, 0.05, 0.05]} /></mesh>
      </group>
      <group position={[-0.25, -0.8, 0]}>
        <Capsule args={[0.15, 0.3]} material={materials.body} />
        <mesh position={[0, -0.2, 0.1]} material={materials.yellowArmor}><boxGeometry args={[0.3, 0.18, 0.4]} /></mesh>
        <mesh position={[0, -0.1, 0.31]} material={materials.darkMetal}><boxGeometry args={[0.1, 0.05, 0.05]} /></mesh>
      </group>

      {/* JETPACK */}
      <group position={[0, 0.1, -0.45]}>
        <mesh material={materials.darkMetal}><boxGeometry args={[0.6, 0.7, 0.3]} /></mesh>
        <mesh position={[0, 0, 0.16]} material={materials.yellowArmor}><boxGeometry args={[0.4, 0.5, 0.1]} /></mesh>
        <Cylinder args={[0.12, 0.18, 0.3]} position={[-0.2, -0.4, 0]} material={materials.darkMetal} />
        <Cylinder args={[0.12, 0.18, 0.3]} position={[0.2, -0.4, 0]} material={materials.darkMetal} />
        <group position={[0, -0.7, 0]}>
          <mesh ref={jetpackFlameRef}>
            <coneGeometry args={[0.3, 0.8, 16]} />
            <meshBasicMaterial color="#00F0FF" transparent opacity={0.6} blending={THREE.AdditiveBlending} />
          </mesh>
        </group>
      </group>
    </group>
  );
}


// --- MAIN CONTROLLER ---
export function Robot() {
  const groupRef = useRef<THREE.Group>(null);
  const { viewport } = useThree(); 
  
  const [actionState, setActionState] = useState('idle');
  const [customTaunt, setCustomTaunt] = useState('');
  
  const lastStateChange = useRef(0);
  const tapStartTime = useRef(0);
  const [tapProgress, setTapProgress] = useState(0);
  
  // Get Chat State from store
  const { isChatting, chatMessage } = useRobotStore();
  
  const homeBasePos = useRef({ x: 0, y: 0 }); 
  const currentPos = useRef({ x: 0, y: 0 });
  const randomTarget = useRef({ x: 0, y: 0 });
  const escapeTarget = useRef<{x: number, y: number} | null>(null);
  const lastRandomChange = useRef(0);
  const prevPos = useRef({ x: 0, y: 0 });

  const globalMouse = useRef(new THREE.Vector2(-999, -999));

  useEffect(() => {
    const handleMouseMove = (e: MouseEvent) => {
      globalMouse.current.x = (e.clientX / window.innerWidth) * 2 - 1;
      globalMouse.current.y = -(e.clientY / window.innerHeight) * 2 + 1;
    };
    window.addEventListener('mousemove', handleMouseMove);
    return () => window.removeEventListener('mousemove', handleMouseMove);
  }, []);

  const asteroid = useRef({
    active: false, pos: new THREE.Vector3(0, 0, 0), vel: new THREE.Vector3(0, 0, 0),
    nextSpawn: 5, rot: new THREE.Vector3(0,0,0)
  });
  const asteroidRef = useRef<THREE.Group>(null);

  const panicTaunts = [
    "Ahhh! Evasive maneuvers! 💨", "Too close! 🚨", "Initiating retreat! 🏃‍♂️", 
    "Zoooom! ⚡", "Personal space violated! 🛡️"
  ];

  useFrame((state) => {
    if (!groupRef.current) return;
    const time = state.clock.elapsedTime;

    // FIX: Fetch live Zustand state inside the useFrame to avoid stale closures
    const store = useRobotStore.getState();
    const liveIsChatting = store.isChatting;
    const liveIsFlying = store.isFlying;
    const liveTargetPosition = store.targetPosition;
    
    const botWidth = 1.0;
    const botHeightTop = 2.2; 
    const botHeightBottom = 1.5; 
    
    const maxSafeX = (viewport.width / 2) - botWidth;
    const maxSafeYTop = (viewport.height / 2) - botHeightTop;
    const maxSafeYBottom = -(viewport.height / 2) + botHeightBottom;

    // --- CONTINUOUS MOUSE REPEL (Disabled if chatting!) ---
    const worldMouseX = (globalMouse.current.x * viewport.width) / 2;
    const worldMouseY = (globalMouse.current.y * viewport.height) / 2;
    const distToMouse = Math.hypot(currentPos.current.x - worldMouseX, currentPos.current.y - worldMouseY);

    if (distToMouse < 3.5 && !liveIsFlying && !liveIsChatting && actionState !== 'crashing' && actionState !== 'climbing') {
       const dx = currentPos.current.x - worldMouseX;
       const dy = currentPos.current.y - worldMouseY;
       const mag = Math.sqrt(dx*dx + dy*dy) || 1;
       const repelForce = (3.5 - distToMouse) * 0.15;

       let newTargetX = currentPos.current.x + (dx/mag) * repelForce;
       let newTargetY = currentPos.current.y + (dy/mag) * repelForce;

       newTargetX = Math.max(-maxSafeX, Math.min(maxSafeX, newTargetX));
       newTargetY = Math.max(maxSafeYBottom, Math.min(maxSafeYTop, newTargetY));

       escapeTarget.current = { x: newTargetX, y: newTargetY };
       
       if (actionState !== 'escaping') {
         setActionState('escaping'); 
         setCustomTaunt(panicTaunts[Math.floor(Math.random() * panicTaunts.length)]);
         lastStateChange.current = time;
       }
    }

    // --- ASTEROID LOGIC (Disabled if chatting) ---
    if (!asteroid.current.active && time > asteroid.current.nextSpawn && !liveIsFlying && !liveIsChatting && actionState !== 'crashing' && actionState !== 'climbing') {
      asteroid.current.active = true;
      const startRight = Math.random() > 0.5;
      asteroid.current.pos.set(
        startRight ? viewport.width / 2 + 3 : -viewport.width / 2 - 3,
        Math.random() * (viewport.height - 4) - (viewport.height / 2 - 2), 0
      );
      const targetY = currentPos.current.y + (Math.random() - 0.5);
      asteroid.current.vel.set(startRight ? -10 : 10, (targetY - asteroid.current.pos.y) * 2, 0).normalize().multiplyScalar(0.15 + Math.random() * 0.1); 
      asteroid.current.rot.set(Math.random(), Math.random(), Math.random());
    }

    if (asteroid.current.active && asteroidRef.current) {
      asteroid.current.pos.add(asteroid.current.vel);
      asteroidRef.current.position.copy(asteroid.current.pos);
      asteroidRef.current.rotation.x += asteroid.current.rot.x * 0.2;
      asteroidRef.current.rotation.y += asteroid.current.rot.y * 0.2;

      const distToAsteroid = Math.hypot(currentPos.current.x - asteroid.current.pos.x, currentPos.current.y - asteroid.current.pos.y);
      if (distToAsteroid < 1.8 && !liveIsChatting && actionState !== 'dodging' && actionState !== 'crashing' && actionState !== 'climbing' && !liveIsFlying) {
        if (Math.random() > 0.3) { 
          setActionState('dodging');
          setCustomTaunt("Whoa there! ☄️");
          const dodgeDir = asteroid.current.pos.y > currentPos.current.y ? -3 : 3;
          escapeTarget.current = { x: Math.max(-maxSafeX, Math.min(maxSafeX, currentPos.current.x)), y: Math.max(maxSafeYBottom, Math.min(maxSafeYTop, currentPos.current.y + dodgeDir)) };
          lastStateChange.current = time;
        } else {
          setActionState('crashing');
          setCustomTaunt("Armor breached! 😵💫");
          escapeTarget.current = { x: currentPos.current.x, y: -viewport.height / 2 - 3 }; 
          lastStateChange.current = time;
        }
      }
      if (Math.abs(asteroid.current.pos.x) > viewport.width / 2 + 4) {
        asteroid.current.active = false;
        asteroid.current.nextSpawn = time + 6 + Math.random() * 6;
        asteroidRef.current.position.set(0, 999, 0); 
      }
    }

    // --- IDLE RANDOM ANIMATION SELECTOR ---
    const isSpecialIdleState = ['idle', 'waving', 'spinning', 'scanning', 'sleeping'].includes(actionState);
    if (isSpecialIdleState && !liveIsFlying && !liveIsChatting && distToMouse > 4.0) {
      if (time - lastStateChange.current > 4 + Math.random() * 3) {
        const rand = Math.random();
        if (rand > 0.85) { setActionState('sleeping'); setCustomTaunt('Zzz... power saving...'); }
        else if (rand > 0.70) { setActionState('spinning'); setCustomTaunt('Wheeee! 🌀'); }
        else if (rand > 0.55) { setActionState('scanning'); setCustomTaunt('Scanning matrix... 📊'); }
        else if (rand > 0.40) { setActionState('waving'); setCustomTaunt('Hello human! 👋'); }
        else { setActionState('idle'); setCustomTaunt(''); }
        lastStateChange.current = time;
      }
    }

    // --- STATE MACHINE TIMERS ---
    if (actionState === 'crashing') {
      if (time - lastStateChange.current > 3.0) { 
        setActionState('climbing');
        setCustomTaunt("Rebooting systems... 🎈");
        currentPos.current.y = -viewport.height / 2 - 2.0; 
        escapeTarget.current = { x: currentPos.current.x, y: 0 }; 
      }
    } else if (actionState === 'climbing') {
      if (Math.abs(currentPos.current.y - (escapeTarget.current?.y || 0)) < 0.2) {
        setActionState('idle');
        setCustomTaunt("All systems nominal! ✨");
        setTimeout(() => setCustomTaunt(''), 3000);
      }
    } else if (actionState === 'tapping') {
      const progress = (time - tapStartTime.current) / 1.5; 
      setTapProgress(progress);
      if (progress < 0.4) groupRef.current.position.z = THREE.MathUtils.lerp(groupRef.current.position.z, 0.2, 0.1); 
      else if (progress < 0.7) groupRef.current.position.z = THREE.MathUtils.lerp(groupRef.current.position.z, 1.5, 0.4); 
      else groupRef.current.position.z = THREE.MathUtils.lerp(groupRef.current.position.z, 0, 0.1); 
      if (progress > 0.6 && progress < 0.65 && liveIsFlying) store.arrive();
      if (progress > 1) { setActionState('idle'); lastStateChange.current = time; setCustomTaunt(''); }
    } else if (actionState === 'dodging' || actionState === 'escaping') {
       if (distToMouse > 4.0 && time - lastStateChange.current > 1.5) {
          setActionState('idle');
          escapeTarget.current = null;
          homeBasePos.current = { x: currentPos.current.x, y: currentPos.current.y };
          setTimeout(() => setCustomTaunt(''), 2000);
       }
    } 

    // --- SMOOTH POSITION MOVEMENT ---
    let targetX = currentPos.current.x;
    let targetY = currentPos.current.y;
    let lerpSpeed = 0.05;

    // IF CHATTING: Anchor him Next to the Chatbox!
    if (liveIsChatting) {
      targetX = maxSafeX * 0.45; // Move to the right side
      targetY = maxSafeYBottom * 0.7; // Hover above bottom
      lerpSpeed = 0.08;
      if (actionState !== 'idle') setActionState('idle');
    }
    else if (liveIsFlying && liveTargetPosition) {
      targetX = (liveTargetPosition.x / window.innerWidth) * viewport.width - viewport.width / 2;
      targetY = -(liveTargetPosition.y / window.innerHeight) * viewport.height + viewport.height / 2;
      targetX = Math.max(-maxSafeX, Math.min(maxSafeX, targetX));
      targetY = Math.max(maxSafeYBottom, Math.min(maxSafeYTop, targetY));
      lerpSpeed = 0.08;
      if (Math.abs(currentPos.current.x - targetX) < 0.2 && Math.abs(currentPos.current.y - targetY) < 0.2 && actionState !== 'tapping') {
        setActionState('tapping');
        tapStartTime.current = time;
        homeBasePos.current = { x: targetX, y: targetY }; 
      }
    } else if ((actionState === 'escaping' || actionState === 'dodging' || actionState === 'crashing' || actionState === 'climbing') && escapeTarget.current) {
      targetX = escapeTarget.current.x;
      targetY = escapeTarget.current.y;
      lerpSpeed = actionState === 'crashing' ? 0.05 : (actionState === 'climbing' ? 0.02 : 0.1); 
    } else if (isSpecialIdleState && actionState !== 'sleeping') {
      if (time - lastRandomChange.current > 5) {
        randomTarget.current = {
          x: Math.max(-maxSafeX, Math.min(maxSafeX, homeBasePos.current.x + (Math.random() - 0.5) * viewport.width * 0.4)),
          y: Math.max(maxSafeYBottom, Math.min(maxSafeYTop, homeBasePos.current.y + (Math.random() - 0.5) * viewport.height * 0.4)),
        };
        lastRandomChange.current = time;
      }
      targetX = randomTarget.current.x;
      targetY = randomTarget.current.y;
      lerpSpeed = 0.015;
    }

    prevPos.current.x = currentPos.current.x;
    prevPos.current.y = currentPos.current.y;
    currentPos.current.x = THREE.MathUtils.lerp(currentPos.current.x, targetX, lerpSpeed);
    currentPos.current.y = THREE.MathUtils.lerp(currentPos.current.y, targetY, lerpSpeed);
    groupRef.current.position.set(currentPos.current.x, currentPos.current.y, groupRef.current.position.z);

    // --- DYNAMIC VELOCITY-BASED FLIGHT ROTATION ---
    const vx = currentPos.current.x - prevPos.current.x;
    const vy = currentPos.current.y - prevPos.current.y;

    if (actionState === 'crashing') {
      groupRef.current.rotation.y += 0.3; groupRef.current.rotation.x += 0.2; groupRef.current.rotation.z += 0.1;
    } else if (actionState === 'tapping' || actionState === 'spinning') {
      groupRef.current.rotation.y = THREE.MathUtils.lerp(groupRef.current.rotation.y, 0, 0.2); 
      groupRef.current.rotation.z = THREE.MathUtils.lerp(groupRef.current.rotation.z, 0, 0.2);
      groupRef.current.rotation.x = THREE.MathUtils.lerp(groupRef.current.rotation.x, 0, 0.2);
    } else if (liveIsChatting) {
      // Look right towards the chatbox!
      groupRef.current.rotation.y = THREE.MathUtils.lerp(groupRef.current.rotation.y, 0.6, 0.1);
      groupRef.current.rotation.x = THREE.MathUtils.lerp(groupRef.current.rotation.x, 0.1, 0.1);
      groupRef.current.rotation.z = THREE.MathUtils.lerp(groupRef.current.rotation.z, 0, 0.1);
    } else {
      const targetRoll = -vx * 8.0; 
      const targetPitch = (vy * 8.0) + (Math.abs(vx) + Math.abs(vy)) * 3.0; 
      const targetYaw = vx * 5.0;
      groupRef.current.rotation.z = THREE.MathUtils.lerp(groupRef.current.rotation.z, targetRoll, 0.1);
      groupRef.current.rotation.x = THREE.MathUtils.lerp(groupRef.current.rotation.x, targetPitch, 0.1);
      groupRef.current.rotation.y = THREE.MathUtils.lerp(groupRef.current.rotation.y, targetYaw, 0.1);
    }
  });

  // Decide speech text (Chat mode overrides everything!)
  let speechText = '👋 POS Assistant Online.';
  if (isChatting) speechText = chatMessage || 'How can I assist you?';
  else if (customTaunt) speechText = customTaunt;
  else if (useRobotStore.getState().isFlying) speechText = '🚀 Navigating...';
  else if (actionState === 'tapping') speechText = tapProgress < 0.5 ? '🎯 Selecting...' : '⚡ Beep!';

  const bubbleColor = actionState === 'crashing' ? '#FF003C' : actionState === 'sleeping' ? '#555555' : actionState === 'scanning' ? '#39FF14' : isChatting ? '#BF00FF' : '#00F0FF';

  return (
    <>
      <group ref={groupRef}>
        <Trail width={1.5} length={8} color={isChatting ? '#BF00FF' : '#00F0FF'} attenuation={(t) => t * t}>
          <ChubbyBot actionState={actionState} />
        </Trail>

        <mesh rotation={[Math.PI / 2, 0, 0]} position={[0, -1.0, 0]}>
          <ringGeometry args={[0.3, 0.5, 32]} />
          <meshBasicMaterial color={bubbleColor} transparent opacity={0.3} side={THREE.DoubleSide} />
        </mesh>

        <Html position={[0, 1.6, 0]} center distanceFactor={10} style={{ pointerEvents: 'none', zIndex: 10000, opacity: actionState === 'sleeping' && !customTaunt ? 0 : 1, transition: 'opacity 0.3s' }}>
          <div style={{
            background: 'linear-gradient(135deg, rgba(26, 26, 26, 0.95) 0%, rgba(10, 10, 10, 0.98) 100%)',
            backdropFilter: 'blur(10px)', border: `2px solid ${bubbleColor}`, boxShadow: `0 0 20px ${bubbleColor}55`,
            borderRadius: '16px', padding: '10px 18px', whiteSpace: 'nowrap', transition: 'all 0.3s ease', 
            transform: useRobotStore.getState().isFlying || actionState === 'escaping' || actionState === 'dodging' ? 'scale(0.9)' : 'scale(1)',
          }}>
            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{ width: '8px', height: '8px', borderRadius: '50%', backgroundColor: bubbleColor, boxShadow: `0 0 10px ${bubbleColor}`, animation: actionState === 'sleeping' ? 'none' : 'pulse 1s infinite' }} />
              <span style={{ fontSize: '15px', fontFamily: 'Rajdhani, sans-serif', fontWeight: 600, color: '#F0F0F0' }}>{speechText}</span>
            </div>
          </div>
          <div style={{ width: 0, height: 0, margin: '0 auto', borderLeft: '8px solid transparent', borderRight: '8px solid transparent', borderTop: `8px solid ${bubbleColor}` }} />
        </Html>
      </group>

      <group ref={asteroidRef} position={[0, 999, 0]}>
        <mesh><dodecahedronGeometry args={[0.4, 1]} /><meshStandardMaterial color="#444" roughness={1} metalness={0.1} /></mesh>
        <mesh scale={1.2}><dodecahedronGeometry args={[0.4, 1]} /><meshBasicMaterial color="#FF3300" wireframe transparent opacity={0.6} /></mesh>
        <Trail width={3} length={12} color={'#FF5500'} attenuation={(t) => t * t}><meshBasicMaterial color="#FF0000" /></Trail>
      </group>
    </>
  );
}

================================================================================
FILE: components\3d\RobotManager.tsx
================================================================================

'use client';

import React from 'react';
import { Scene } from './Scene';
import { Robot } from './Robot';

export function RobotManager() {
  return (
    <Scene>
      <Robot />
    </Scene>
  );
}

================================================================================
FILE: components\3d\Scene.tsx
================================================================================

'use client';

import React, { Suspense, useRef } from 'react';
import { Canvas, useFrame } from '@react-three/fiber';
import { Environment, Stars, Sparkles } from '@react-three/drei';
import * as THREE from 'three';

function SpaceBackground() {
  const spaceRef = useRef<THREE.Group>(null);
  const nebulaRef = useRef<THREE.Mesh>(null);

  useFrame((state) => {
    if (!spaceRef.current) return;
    const time = state.clock.elapsedTime;
    
    // Slow infinite rotation of the cosmos
    spaceRef.current.rotation.y += 0.0003;
    spaceRef.current.rotation.x += 0.0001;
    
    // Smooth Parallax effect reacting to mouse
    const targetX = (state.pointer.x * Math.PI) / 15;
    const targetY = (state.pointer.y * Math.PI) / 15;
    
    spaceRef.current.rotation.y = THREE.MathUtils.lerp(spaceRef.current.rotation.y, targetX, 0.02);
    spaceRef.current.rotation.x = THREE.MathUtils.lerp(spaceRef.current.rotation.x, -targetY, 0.02);

    if (nebulaRef.current) {
       nebulaRef.current.rotation.z = time * 0.05;
    }
  });

  return (
    <group ref={spaceRef}>
      {/* Deep Space Stars */}
      <Stars radius={150} depth={80} count={7000} factor={6} saturation={1} fade speed={1.5} />
      
      {/* Floating Cyber-Dust (Foreground) */}
      <Sparkles count={200} scale={25} size={2.5} speed={0.5} opacity={0.5} color="#00F0FF" />
      <Sparkles count={150} scale={25} size={3} speed={0.3} opacity={0.3} color="#FFD700" />
      <Sparkles count={100} scale={30} size={4} speed={0.2} opacity={0.2} color="#FF003C" />

      {/* Cosmic Nebula Lights */}
      <mesh ref={nebulaRef} position={[-20, 15, -50]}>
        <planeGeometry args={[60, 60]} />
        <meshBasicMaterial color="#00F0FF" transparent opacity={0.03} blending={THREE.AdditiveBlending} depthWrite={false} />
      </mesh>
      <mesh position={[20, -15, -60]}>
        <planeGeometry args={[80, 80]} />
        <meshBasicMaterial color="#FF003C" transparent opacity={0.02} blending={THREE.AdditiveBlending} depthWrite={false} />
      </mesh>
    </group>
  );
}

interface SceneProps {
  children: React.ReactNode;
}

export function Scene({ children }: SceneProps) {
  return (
    <Canvas
      camera={{ position: [0, 0, 8], fov: 50 }}
      style={{
        position: 'fixed',
        top: 0,
        left: 0,
        width: '100vw',
        height: '100vh',
        pointerEvents: 'none', // Crucial: lets you click the UI beneath! Robot uses global DOM listeners now.
        zIndex: 9999,
      }}
      gl={{ alpha: true, antialias: true, powerPreference: "high-performance" }}
    >
      <Suspense fallback={null}>
        <SpaceBackground />
        
        {/* Soft studio lighting to make Baymax look solid and bright */}
        <ambientLight intensity={1.2} />
        <directionalLight position={[10, 10, 10]} intensity={2.0} color="#ffffff" />
        <directionalLight position={[-10, 10, -10]} intensity={1.0} color="#ffffff" />
        
        {/* Colorful rim lights */}
        <pointLight position={[3, 3, 2]} intensity={2} color="#FFD700" distance={10} />
        <pointLight position={[-3, -3, 2]} intensity={2} color="#00F0FF" distance={10} />
        
        <Environment preset="city" />
        
        {children}
      </Suspense>
    </Canvas>
  );
}

================================================================================
FILE: components\3d\TimeTravelScene.tsx
================================================================================

'use client';

import React, { useRef, useState, useEffect, useMemo } from 'react';
import { Canvas, useFrame, useThree } from '@react-three/fiber';
import { Float, RoundedBox, Sphere, MeshPortalMaterial, Environment, Capsule, Box } from '@react-three/drei';
import * as THREE from 'three';

// --- CUSTOM HOOK: SCROLL PROGRESS ---
function useSectionScroll() {
  const [progress, setProgress] = useState(0);
  useEffect(() => {
    const handleScroll = () => {
      const el = document.getElementById('lusion-scroll-section');
      if (el) {
        const scrollY = window.scrollY;
        const offsetTop = el.offsetTop;
        const maxScroll = el.offsetHeight - window.innerHeight;
        let p = (scrollY - offsetTop) / maxScroll;
        setProgress(Math.max(0, Math.min(1, p)));
      }
    };
    window.addEventListener('scroll', handleScroll, { passive: true });
    handleScroll(); // init
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);
  return progress;
}

// --- CUSTOM HOOK: BULLET TIME (SLOW MO ON HOLD) ---
function useSlowTime() {
  const timeRef = useRef(0);
  const targetSpeed = useRef(1);
  const currentSpeed = useRef(1);

  useEffect(() => {
    const handleDown = () => { targetSpeed.current = 0.05; }; // Matrix slow-mo
    const handleUp = () => { targetSpeed.current = 1.0; };    // Normal speed
    
    window.addEventListener('pointerdown', handleDown);
    window.addEventListener('pointerup', handleUp);
    return () => {
      window.removeEventListener('pointerdown', handleDown);
      window.removeEventListener('pointerup', handleUp);
    };
  }, []);

  useFrame((_, delta) => {
    currentSpeed.current = THREE.MathUtils.damp(currentSpeed.current, targetSpeed.current, 5, delta);
    timeRef.current += delta * currentSpeed.current;
  });

  return timeRef;
}

// --- THE ASTRONAUT ---
function Astronaut({ timeRef }: { timeRef: React.MutableRefObject<number> }) {
  const group = useRef<THREE.Group>(null);
  const head = useRef<THREE.Group>(null);
  const leftArm = useRef<THREE.Group>(null);
  const rightArm = useRef<THREE.Group>(null);

  const materials = useMemo(() => ({
    suit: new THREE.MeshStandardMaterial({ color: '#E0E5EC', roughness: 0.2, metalness: 0.1 }),
    visor: new THREE.MeshStandardMaterial({ color: '#0A0A0A', roughness: 0.1, metalness: 0.9, envMapIntensity: 2 }),
    joints: new THREE.MeshStandardMaterial({ color: '#2A2D34', roughness: 0.8 }),
  }), []);

  useFrame((state) => {
    if (!group.current || !head.current || !leftArm.current || !rightArm.current) return;
    const t = timeRef.current; // Driven by slow-mo time

    // Floating body animation
    group.current.position.y = Math.sin(t * 1.5) * 0.15 - 0.5;
    group.current.position.x = Math.cos(t * 1) * 0.1;

    // Head flawlessly tracks the mouse cursor
    const targetX = state.pointer.x * 1.5;
    const targetY = state.pointer.y * 1.5;
    head.current.rotation.y = THREE.MathUtils.lerp(head.current.rotation.y, targetX, 0.1);
    head.current.rotation.x = THREE.MathUtils.lerp(head.current.rotation.x, -targetY, 0.1);

    // Arms waving in zero gravity
    leftArm.current.rotation.z = Math.sin(t * 2) * 0.2 + 0.5;
    leftArm.current.rotation.x = Math.cos(t * 1.5) * 0.2;
    rightArm.current.rotation.z = -Math.sin(t * 2.2) * 0.2 - 0.5;
    rightArm.current.rotation.x = Math.cos(t * 1.7) * 0.2;
  });

  return (
    <group ref={group} scale={0.8}>
      <Capsule args={[0.3, 0.5, 16, 16]} material={materials.suit} position={[0, -0.2, 0]} />
      <Box args={[0.4, 0.5, 0.2]} position={[0, -0.1, -0.3]} material={materials.suit} /> 
      
      <group ref={head} position={[0, 0.5, 0]}>
        <Sphere args={[0.32, 32, 32]} material={materials.suit} />
        {/* Glowing Neon Visor Reflection */}
        <mesh position={[0, 0.02, 0.2]}>
          <boxGeometry args={[0.45, 0.35, 0.2]} />
          <primitive object={materials.visor} attach="material" />
        </mesh>
      </group>

      <group ref={leftArm} position={[0.4, 0.2, 0]}>
        <Sphere args={[0.12]} material={materials.joints} />
        <Capsule args={[0.08, 0.4]} position={[0.2, -0.2, 0]} rotation={[0, 0, -Math.PI/4]} material={materials.suit} />
      </group>

      <group ref={rightArm} position={[-0.4, 0.2, 0]}>
        <Sphere args={[0.12]} material={materials.joints} />
        <Capsule args={[0.08, 0.4]} position={[-0.2, -0.2, 0]} rotation={[0, 0, Math.PI/4]} material={materials.suit} />
      </group>

      <group position={[0.15, -0.7, 0]}><Capsule args={[0.1, 0.5]} material={materials.suit} /></group>
      <group position={[-0.15, -0.7, 0]}><Capsule args={[0.1, 0.5]} material={materials.suit} /></group>
    </group>
  );
}

// --- THE IPAD FRAME & PORTAL ---
function LusionDevice() {
  const deviceRef = useRef<THREE.Group>(null);
  const progress = useSectionScroll();
  const timeRef = useSlowTime();
  const { viewport } = useThree(); // Use viewport to calculate exact screen width

  useFrame((state, delta) => {
    if (!deviceRef.current) return;

    // 1. SCROLL SCRUBBING LOGIC
    // Calculate the perfect Left-Side position based on screen size
    const restingX = -(viewport.width / 4); // Placed exactly at 25% of the screen width (left half)
    
    let targetY = -8; // Starts offscreen bottom
    let targetX = restingX;
    let targetScale = 1;

    // Animate based on scroll progress
    if (progress > 0 && progress < 0.2) {
      // Entering screen (flies up)
      const p = progress / 0.2;
      targetY = -8 + (p * 8); 
    } else if (progress >= 0.2 && progress <= 0.8) {
      // Resting on screen comfortably
      targetY = 0;
    } else if (progress > 0.8) {
      // Exiting screen (flies up and slightly towards camera)
      const p = (progress - 0.8) / 0.2;
      targetY = p * 4;
      targetScale = 1 + (p * 0.1);
    }

    // Apply movement smoothly
    deviceRef.current.position.y = THREE.MathUtils.damp(deviceRef.current.position.y, targetY, 4, delta);
    deviceRef.current.position.x = THREE.MathUtils.damp(deviceRef.current.position.x, targetX, 4, delta);
    deviceRef.current.scale.setScalar(THREE.MathUtils.damp(deviceRef.current.scale.x, targetScale, 4, delta));

    // 2. MOUSE HOVER PARALLAX (Tilting the iPad)
    const tiltX = state.pointer.y * 0.15;
    const tiltY = state.pointer.x * 0.2;
    deviceRef.current.rotation.x = THREE.MathUtils.damp(deviceRef.current.rotation.x, tiltX, 5, delta);
    deviceRef.current.rotation.y = THREE.MathUtils.damp(deviceRef.current.rotation.y, tiltY + 0.1, 5, delta); 
  });

  return (
    <group ref={deviceRef}>
      <Float floatIntensity={0.5} rotationIntensity={0.2} speed={2}>
        
        {/* Sleek Dark Cyberpunk iPad Bezel */}
        <RoundedBox args={[4.8, 3.4, 0.1]} radius={0.15} smoothness={4}>
          <meshStandardMaterial color="#0A0A0A" roughness={0.1} metalness={0.9} />
        </RoundedBox>

        {/* The Screen Portal */}
        <mesh position={[0, 0, 0.051]}>
          <planeGeometry args={[4.5, 3.1]} />
          <MeshPortalMaterial blend={0}>
            
            {/* Environment inside the portal - Deep Space */}
            <color attach="background" args={['#02050A']} />
            <ambientLight intensity={0.5} />
            <directionalLight position={[5, 10, 5]} intensity={2} color="#ffffff" />
            
            {/* Neon Rim Lights for Cyberpunk Vibe inside the portal */}
            <pointLight position={[-3, 0, 2]} intensity={5} color="#00F0FF" distance={10} />
            <pointLight position={[3, 0, 2]} intensity={5} color="#BF00FF" distance={10} />
            
            <Environment preset="city" />

            {/* Glowing Earth */}
            <Sphere args={[5, 64, 64]} position={[0, -5.5, -3]}>
              <meshStandardMaterial color="#0A4D8C" emissive="#00F0FF" emissiveIntensity={0.2} roughness={0.4} />
            </Sphere>
            {/* Earth Atmosphere Halo */}
            <mesh position={[0, -5.5, -3.1]}>
              <sphereGeometry args={[5.2, 32, 32]} />
              <meshBasicMaterial color="#00F0FF" transparent opacity={0.15} blending={THREE.AdditiveBlending} />
            </mesh>

            {/* The Hero Astronaut */}
            <Astronaut timeRef={timeRef} />

          </MeshPortalMaterial>
        </mesh>

      </Float>
    </group>
  );
}

export function TimeTravelScene() {
  return (
    // Transparent Canvas lets the bg-deep-black from HTML show through perfectly
    <Canvas camera={{ position: [0, 0, 6], fov: 45 }} gl={{ alpha: true, antialias: true }} style={{ pointerEvents: 'none' }}>
      <ambientLight intensity={1} />
      <directionalLight position={[10, 10, 10]} intensity={1} />
      <LusionDevice />
    </Canvas>
  );
}

================================================================================
FILE: components\layout\ChatBox.tsx
================================================================================

'use client';

import React, { useState, useEffect, useRef } from 'react';
import { MessageSquare, X, Send, Bot, Loader2 } from 'lucide-react';
import { useRobotStore } from '@/lib/store';
import { motion, AnimatePresence } from 'framer-motion';

export function ChatBox() {
  const { isChatting, setChatting, setChatMessage } = useRobotStore();
  const [input, setInput] = useState('');
  const [messages, setMessages] = useState<{role: 'user' | 'assistant', content: string}[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const messagesEndRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages, isLoading]);

  const handleSend = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!input.trim() || isLoading) return;

    const userMsg = input.trim();
    setInput('');
    
    const newMessages = [...messages, { role: 'user' as const, content: userMsg }];
    setMessages(newMessages);
    setIsLoading(true);
    setChatMessage('Transmitting to mainframe...');

    try {
      const res = await fetch('/api/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ messages: newMessages }),
      });
      
      const data = await res.json();
      
      if (res.ok && data.reply) {
        setMessages(prev => [...prev, { role: 'assistant', content: data.reply }]);
        setChatMessage(data.reply.length > 50 ? "Transmission received." : data.reply);
      } else {
        throw new Error("API failed or API key missing.");
      }
    } catch (err) {
      // ABSOLUTE FRONTEND FALLBACK. 
      // If the API fails for ANY reason (missing .env, network error), this code runs.
      setTimeout(() => {
        const simulatedResponses = [
          "I am operating in local matrix mode. Ghostwire guarantees 100% uptime even when the cloud API is offline.",
          "Connection to the Groq mainframe is severed. However, my local systems confirm Ghostwire POS is the fastest on the grid.",
          "API Key missing. But don't worry, Ghostwire hardware functions perfectly in offline environments."
        ];
        const randomReply = simulatedResponses[Math.floor(Math.random() * simulatedResponses.length)];
        
        setMessages(prev => [...prev, { role: 'assistant', content: randomReply }]);
        setChatMessage("Offline Mode Active.");
        setIsLoading(false);
      }, 1000);
      return; // Exit early so the finally block doesn't double-trigger
    } 
    
    setIsLoading(false);
  };

  return (
    <>
      <button 
        onClick={() => setChatting(!isChatting)}
        style={{ zIndex: 999999 }}
        className={`fixed bottom-6 right-6 w-14 h-14 rounded-full flex items-center justify-center transition-all duration-300 shadow-2xl ${isChatting ? 'bg-alert-red shadow-neon-red rotate-90' : 'bg-electric-purple shadow-neon-purple hover:scale-110'}`}
      >
        {isChatting ? <X className="w-6 h-6 text-white" /> : <MessageSquare className="w-6 h-6 text-white" />}
      </button>

      <AnimatePresence>
        {isChatting && (
          <motion.div 
            key="chatbox-modal"
            initial={{ opacity: 0, y: 50, scale: 0.9 }} 
            animate={{ opacity: 1, y: 0, scale: 1 }} 
            exit={{ opacity: 0, y: 50, scale: 0.9 }}
            className="fixed bottom-24 right-6 w-80 sm:w-96 glass border border-electric-purple/40 rounded-2xl overflow-hidden flex flex-col shadow-2xl"
            style={{ zIndex: 999999, height: '500px', pointerEvents: 'auto' }}
          >
            <div className="bg-deep-black/90 border-b border-electric-purple/20 p-4 flex items-center gap-3">
              <div className="p-2 bg-electric-purple/20 rounded-full"><Bot className="w-5 h-5 text-electric-purple" /></div>
              <div>
                <h3 className="font-orbitron text-ghost-white text-sm">Ghostwire Assistant</h3>
                <p className="font-mono text-xs text-neon-green flex items-center gap-1"><span className="w-2 h-2 rounded-full bg-neon-green animate-pulse"></span> Uplink Established</p>
              </div>
            </div>

            <div className="flex-grow p-4 overflow-y-auto space-y-4 bg-deep-black/60">
              {messages.length === 0 && (
                <div className="text-center text-ghost-white/50 font-rajdhani mt-10">Ask me about Ghostwire's features, pricing, or hardware compatibility!</div>
              )}
              {messages.map((msg, i) => (
                <div key={i} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                  <div className={`max-w-[85%] p-3 rounded-xl font-rajdhani text-sm ${msg.role === 'user' ? 'bg-electric-purple text-white rounded-br-none' : 'glass border border-white/10 text-ghost-white rounded-bl-none'}`}>
                    {msg.content}
                  </div>
                </div>
              ))}
              {isLoading && (
                <div className="flex justify-start">
                   <div className="glass border border-white/10 text-ghost-white p-3 rounded-xl rounded-bl-none flex items-center gap-2">
                     <Loader2 className="w-4 h-4 animate-spin text-electric-purple" />
                     <span className="font-mono text-xs">Processing...</span>
                   </div>
                </div>
              )}
              <div ref={messagesEndRef} />
            </div>

            <div className="p-3 bg-deep-black/90 border-t border-electric-purple/20">
              <form onSubmit={handleSend} className="flex gap-2">
                <input 
                  type="text" value={input} onChange={(e) => setInput(e.target.value)} disabled={isLoading}
                  placeholder="Transmit message..."
                  className="flex-grow bg-dark-grey border border-white/10 rounded-lg px-3 py-2 text-sm font-rajdhani text-ghost-white focus:outline-none focus:border-electric-purple disabled:opacity-50"
                />
                <button type="submit" disabled={isLoading || !input.trim()} className="p-2 bg-electric-purple text-white rounded-lg hover:bg-electric-purple/80 transition-colors disabled:opacity-50">
                  <Send className="w-4 h-4" />
                </button>
              </form>
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </>
  );
}

================================================================================
FILE: components\layout\Footer.tsx
================================================================================

import React from 'react';
import Link from 'next/link';
import { Github, Twitter, Linkedin, Mail, Zap } from 'lucide-react';

export function Footer() {
  const currentYear = new Date().getFullYear();

  const footerLinks = {
    product: [
      { label: 'Features', href: '/products' },
      { label: 'Demo', href: '/demo' },
      { label: 'Pricing', href: '/pricing' },
      { label: 'FAQ', href: '/about#faq' },
    ],
    company: [
      { label: 'About Us', href: '/about' },
      { label: 'Contact', href: '/contact' },
      { label: 'Careers', href: '/about#careers' },
      { label: 'Blog', href: '/blog' },
    ],
    legal: [
      { label: 'Privacy Policy', href: '/privacy' },
      { label: 'Terms of Service', href: '/terms' },
      { label: 'Cookie Policy', href: '/cookies' },
      { label: 'GDPR', href: '/gdpr' },
    ],
  };

  const socialLinks = [
    { icon: Github, href: 'https://github.com', label: 'GitHub' },
    { icon: Twitter, href: 'https://twitter.com', label: 'Twitter' },
    { icon: Linkedin, href: 'https://linkedin.com', label: 'LinkedIn' },
    { icon: Mail, href: 'mailto:contact@ghostwire.com', label: 'Email' },
  ];

  return (
    <footer className="relative border-t border-neon-green/20 bg-dark-grey">
      {/* Glowing top border effect */}
      <div className="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-neon-green to-transparent"></div>

      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8">
          {/* Brand Section */}
          <div className="lg:col-span-2">
            <div className="flex items-center space-x-2 mb-4">
              <Zap className="w-8 h-8 text-neon-green" />
              <span className="text-2xl font-orbitron font-bold text-glow-green">
                GHOSTWIRE
              </span>
            </div>
            <p className="text-ghost-white/70 font-rajdhani mb-6 max-w-sm">
              Next-generation Point of Sale and ERP system designed for the future of retail, hospitality, and enterprise management.
            </p>
            {/* Social Links */}
            <div className="flex space-x-4">
              {socialLinks.map((social) => (
                <a
                  key={social.label}
                  href={social.href}
                  target="_blank"
                  rel="noopener noreferrer"
                  className="w-10 h-10 rounded-full glass flex items-center justify-center text-ghost-white hover:text-neon-green hover:border-neon-green border border-transparent transition-all duration-300"
                  aria-label={social.label}
                >
                  <social.icon className="w-5 h-5" />
                </a>
              ))}
            </div>
          </div>

          {/* Product Links */}
          <div>
            <h3 className="text-neon-green font-orbitron font-semibold mb-4">Product</h3>
            <ul className="space-y-2">
              {footerLinks.product.map((link) => (
                <li key={link.label}>
                  <Link
                    href={link.href}
                    className="text-ghost-white/70 hover:text-neon-green transition-colors font-rajdhani"
                  >
                    {link.label}
                  </Link>
                </li>
              ))}
            </ul>
          </div>

          {/* Company Links */}
          <div>
            <h3 className="text-cyber-cyan font-orbitron font-semibold mb-4">Company</h3>
            <ul className="space-y-2">
              {footerLinks.company.map((link) => (
                <li key={link.label}>
                  <Link
                    href={link.href}
                    className="text-ghost-white/70 hover:text-cyber-cyan transition-colors font-rajdhani"
                  >
                    {link.label}
                  </Link>
                </li>
              ))}
            </ul>
          </div>

          {/* Legal Links */}
          <div>
            <h3 className="text-electric-purple font-orbitron font-semibold mb-4">Legal</h3>
            <ul className="space-y-2">
              {footerLinks.legal.map((link) => (
                <li key={link.label}>
                  <Link
                    href={link.href}
                    className="text-ghost-white/70 hover:text-electric-purple transition-colors font-rajdhani"
                  >
                    {link.label}
                  </Link>
                </li>
              ))}
            </ul>
          </div>
        </div>

        {/* Bottom Bar */}
        <div className="mt-12 pt-8 border-t border-ghost-white/10">
          <div className="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
            <p className="text-ghost-white/50 text-sm font-rajdhani">
              © {currentYear} Ghostwire Systems. All rights reserved.
            </p>
            <p className="text-ghost-white/50 text-sm font-mono">
              Built with <span className="text-neon-green">Next.js</span> &{' '}
              <span className="text-cyber-cyan">Three.js</span>
            </p>
          </div>
        </div>
      </div>

      {/* Background Grid Effect */}
      <div className="absolute inset-0 cyber-grid opacity-10 pointer-events-none"></div>
    </footer>
  );
}

================================================================================
FILE: components\layout\Navbar.tsx
================================================================================

'use client';

import React, { useState, useEffect } from 'react';
import Link from 'next/link';
import { useRouter } from 'next/navigation';
import { Menu, X, Zap } from 'lucide-react';
import { Button } from '@/components/ui/Button';
import { useRobotStore } from '@/lib/store';

// Screen positions for each section (where robot should fly)
const sectionTargets: Record<string, { x: number; y: number }> = {
  '/': { x: 0, y: 0 },
  '/products': { x: -80, y: -20 },
  '/demo': { x: 80, y: -20 },
  '/pricing': { x: 0, y: 50 },
  '/about': { x: -80, y: 50 },
  '/contact': { x: 80, y: 50 },
};

export function Navbar() {
  const [isScrolled, setIsScrolled] = useState(false);
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
  const router = useRouter();
  const { flyTo, isFlying } = useRobotStore();

  useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 20);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const navLinks = [
    { href: '/', label: 'Home' },
    { href: '/products', label: 'Products' },
    { href: '/demo', label: 'Demo' },
    { href: '/pricing', label: 'Pricing' },
    { href: '/about', label: 'About' },
    { href: '/contact', label: 'Contact' },
  ];

  const handleNavClick = (e: React.MouseEvent, href: string) => {
    e.preventDefault();
    
    if (isFlying) return; // Don't allow clicks while robot is flying
    
    // Send the EXACT pixel coordinates of your mouse click to the robot!
    const target = { x: e.clientX, y: e.clientY };
    
    // Tell robot to fly to target, then navigate when it arrives
    flyTo(href, target, () => {
      router.push(href);
    });
    
    setIsMobileMenuOpen(false);
  };

  return (
    <nav
      className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${
        isScrolled ? 'glass border-b border-neon-green/20 shadow-lg' : 'bg-transparent'
      }`}
    >
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center justify-between h-20">
          {/* Logo */}
          <a 
            href="/"
            onClick={(e) => handleNavClick(e, '/')}
            className="flex items-center space-x-2 group cursor-pointer"
          >
            <div className="relative">
              <Zap className="w-8 h-8 text-neon-green animate-pulse-glow" />
              <div className="absolute inset-0 blur-md bg-neon-green opacity-50 group-hover:opacity-100 transition-opacity"></div>
            </div>
            <span className="text-2xl font-orbitron font-bold text-glow-green">
              GHOSTWIRE
            </span>
          </a>

          {/* Desktop Navigation */}
          <div className="hidden md:flex items-center space-x-8">
            {navLinks.map((link) => (
              <a
                key={link.href}
                href={link.href}
                onClick={(e) => handleNavClick(e, link.href)}
                className={`font-rajdhani text-ghost-white hover:text-neon-green transition-colors duration-300 relative group cursor-pointer ${isFlying ? 'pointer-events-none opacity-50' : ''}`}
              >
                {link.label}
                <span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-neon-green group-hover:w-full transition-all duration-300"></span>
              </a>
            ))}
          </div>

              {/* CTA Button */}
          <div className="hidden md:block">
            <Button variant="neon-green" size="md" disabled={isFlying} onClick={(e) => handleNavClick(e, '/portal')}>
              Client Portal
            </Button>
          </div>
          {/* Mobile Menu Button */}
          <button
            onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}
            className="md:hidden text-ghost-white hover:text-neon-green transition-colors"
          >
            {isMobileMenuOpen ? <X className="w-6 h-6" /> : <Menu className="w-6 h-6" />}
          </button>
        </div>
      </div>

      {/* Mobile Menu */}
      {isMobileMenuOpen && (
        <div className="md:hidden glass border-t border-neon-green/20">
          <div className="px-4 pt-4 pb-6 space-y-4">
            {navLinks.map((link) => (
              <a
                key={link.href}
                href={link.href}
                onClick={(e) => handleNavClick(e, link.href)}
                className="block font-rajdhani text-ghost-white hover:text-neon-green transition-colors py-2 cursor-pointer"
              >
                {link.label}
              </a>
            ))}
            <Button variant="neon-green" size="md" className="w-full">
              Get Started
            </Button>
          </div>
        </div>
      )}
    </nav>
  );
}

================================================================================
FILE: components\ui\Button.tsx
================================================================================

import React from 'react';
import { cn } from '@/lib/utils';

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'neon-green' | 'neon-cyan' | 'neon-purple' | 'glass';
  size?: 'sm' | 'md' | 'lg';
  children: React.ReactNode;
}

export function Button({ 
  variant = 'neon-green', 
  size = 'md',
  className,
  children,
  ...props 
}: ButtonProps) {
  const baseStyles = "font-rajdhani font-semibold rounded transition-all duration-300 hover:scale-105 active:scale-95";
  
  const variants = {
    'neon-green': 'border-2 border-neon-green shadow-neon-green text-neon-green hover:bg-neon-green hover:text-deep-black',
    'neon-cyan': 'border-2 border-neon-cyan shadow-neon-cyan text-cyber-cyan hover:bg-cyber-cyan hover:text-deep-black',
    'neon-purple': 'border-2 border-neon-purple shadow-neon-purple text-electric-purple hover:bg-electric-purple hover:text-deep-black',
    'glass': 'glass border-ghost-white/20 text-ghost-white hover:border-neon-green',
  };
  
  const sizes = {
    sm: 'px-4 py-2 text-sm',
    md: 'px-6 py-3 text-base',
    lg: 'px-8 py-4 text-lg',
  };
  
  return (
    <button
      className={cn(baseStyles, variants[variant], sizes[size], className)}
      {...props}
    >
      {children}
    </button>
  );
}

================================================================================
FILE: components\ui\Card.tsx
================================================================================

import React from 'react';
import { cn } from '@/lib/utils';

interface CardProps {
  children: React.ReactNode;
  className?: string;
  glowing?: boolean;
  glowColor?: 'green' | 'cyan' | 'purple';
}

export function Card({ children, className, glowing = false, glowColor = 'green' }: CardProps) {
  const glowStyles = {
    green: 'border-neon-green shadow-neon-green',
    cyan: 'border-neon-cyan shadow-neon-cyan',
    purple: 'border-neon-purple shadow-neon-purple',
  };
  
  return (
    <div
      className={cn(
        'glass rounded-lg p-6 border',
        glowing ? glowStyles[glowColor] : 'border-ghost-white/10',
        className
      )}
    >
      {children}
    </div>
  );
}

================================================================================
FILE: components\ui\GlowingBorder.tsx
================================================================================

import React from 'react';

interface GlowingBorderProps {
  children: React.ReactNode;
  color?: 'green' | 'cyan' | 'purple';
  className?: string;
}

export function GlowingBorder({ children, color = 'green', className = '' }: GlowingBorderProps) {
  const colors = {
    green: 'before:bg-neon-green',
    cyan: 'before:bg-cyber-cyan',
    purple: 'before:bg-electric-purple',
  };

  return (
    <div className={`relative group ${className}`}>
      <div className={`absolute -inset-0.5 bg-gradient-to-r from-neon-green via-cyber-cyan to-electric-purple rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-pulse-glow`}></div>
      <div className="relative bg-deep-black rounded-lg">
        {children}
      </div>
    </div>
  );
}

================================================================================
FILE: lib\store.ts
================================================================================

import { create } from 'zustand';

// --- Cart Store ---
export interface CartItem {
  id: string;
  name: string;
  price: number;
  quantity: number;
  category: string;
}

interface CartStore {
  items: CartItem[];
  addItem: (item: Omit<CartItem, 'quantity'>) => void;
  removeItem: (id: string) => void;
  updateQuantity: (id: string, quantity: number) => void;
  clearCart: () => void;
  getTotal: () => number;
}

export const useCartStore = create<CartStore>((set, get) => ({
  items: [],
  addItem: (item) => {
    const existingItem = get().items.find(i => i.id === item.id);
    if (existingItem) {
      set({ items: get().items.map(i => i.id === item.id ? { ...i, quantity: i.quantity + 1 } : i) });
    } else {
      set({ items: [...get().items, { ...item, quantity: 1 }] });
    }
  },
  removeItem: (id) => set({ items: get().items.filter(i => i.id !== id) }),
  updateQuantity: (id, quantity) => {
    if (quantity <= 0) { get().removeItem(id); return; }
    set({ items: get().items.map(i => (i.id === id ? { ...i, quantity } : i)) });
  },
  clearCart: () => set({ items: [] }),
  getTotal: () => get().items.reduce((total, item) => total + item.price * item.quantity, 0),
}));

// --- Robot Navigation & Chat Store ---
interface RobotStore {
  targetSection: string | null;
  targetPosition: { x: number; y: number } | null;
  isFlying: boolean;
  onArrival: (() => void) | null;
  
  isChatting: boolean;
  chatMessage: string;

  flyTo: (section: string, position: { x: number; y: number }, callback: () => void) => void;
  arrive: () => void;
  reset: () => void;
  
  setChatting: (status: boolean) => void;
  setChatMessage: (msg: string) => void;
}

export const useRobotStore = create<RobotStore>((set, get) => ({
  targetSection: null,
  targetPosition: null,
  isFlying: false,
  onArrival: null,
  
  isChatting: false,
  chatMessage: '',

  flyTo: (section, position, callback) => set({ targetSection: section, targetPosition: position, isFlying: true, onArrival: callback }),
  arrive: () => {
    const { onArrival } = get();
    if (onArrival) onArrival();
    set({ isFlying: false, onArrival: null });
  },
  reset: () => set({ targetSection: null, targetPosition: null, isFlying: false, onArrival: null }),
  
  setChatting: (status) => set({ isChatting: status, chatMessage: status ? 'How can I assist you today?' : '' }),
  setChatMessage: (msg) => set({ chatMessage: msg }),
}));

// --- Auth & User Portal Store ---
interface AuthStore {
  isAuthenticated: boolean;
  user: { name: string; email: string } | null;
  licenses: { key: string; type: string; date: string }[];
  login: (name: string, email: string) => void;
  logout: () => void;
  addLicense: (type: string) => void;
}

export const useAuthStore = create<AuthStore>((set) => ({
  isAuthenticated: false,
  user: null,
  licenses: [],
  login: (name, email) => set({ isAuthenticated: true, user: { name, email } }),
  logout: () => set({ isAuthenticated: false, user: null, licenses: [] }),
  addLicense: (type) => set((state) => ({
    licenses: [{ 
      key: `GW-${Math.random().toString(36).substring(2, 6).toUpperCase()}-${Math.random().toString(36).substring(2, 6).toUpperCase()}`, 
      type, 
      date: new Date().toLocaleDateString() 
    }, ...state.licenses]
  }))
}));

================================================================================
FILE: lib\utils.ts
================================================================================

import { type ClassValue, clsx } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

export function formatPrice(price: number): string {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
  }).format(price);
}

export function generateReceiptNumber(): string {
  const timestamp = Date.now();
  const random = Math.floor(Math.random() * 1000);
  return `GW-${timestamp}-${random}`;
}

